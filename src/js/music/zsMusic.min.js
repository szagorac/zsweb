var zsMusic=function(t){"use strict";function n(t){this.message=t,this.name="ZsMusicException"}function e(t,n){this.bpm=t,this.tempoBeat=n}function i(t,n,e){switch(this.txt=t,this.pitchName=t,this.mod=n,this.html=t,this.modUnicode=D,this.semiDistance=e,n){case w.FLAT:this.html=t+p+H+U,this.modUnicode=S,this.txt=t+h;break;case w.SHARP:this.html=t+p+a+U,this.modUnicode=I,this.txt=t+x}}function s(t,n,e){this.pitch=t,this.semiDistance=n,this.preferredModifier=e}function n(t){this.message=t,this.name="ZsMusicException"}function T(){if(!t)throw new n("Invalid libraries. Required: zsUtil")}function _(n){if(t.isNumeric(n))return F/n}function A(n){return t.isNull(n)?null:O[n]}function r(n){return t.isNull(n)?null:l[n]}function o(e,T){if(!t.isObjectInstanceOf(i,e)||!t.isObjectInstanceOf(s,T))return null;var _=e.semiDistance,A=T.semiDistance,r=_+A;if(r>11&&(r-=12),r<0||r>11)throw new n("_transpose: invalid result semitone index: "+r);var o=N[r];if(1==o.length)return o[0];for(var E=T.preferredModifier,c=0;c<o.length;c++){var R=o[c];if(R.mod===E)return R}for(E=e.mod,c=0;c<o.length;c++){R=o[c];if(R.mod===E)return R}return o[0]}function E(t){if(isNull(t))return D;switch(t){case w.FLAT:return S;case w.SHARP:return I}return D}function c(n){t.log(n,u)}function R(){var t=O.G,n=l.A,e=o(t,n);c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.BF,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.C,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.D,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.EF,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.F,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.G,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),t=O.EF,n=l.A,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.BF,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.C,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.D,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.EF,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.F,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt),n=l.G,e=o(t,n),c("Transpose "+t.txt+" to "+n.pitch.txt+": "+e.txt)}const u="zsMusic: ",F=60,D="",h="b",x="#",H="&#9837;",S="♭",a="&#9839;",I="♯",p="<sup>",U="</sup>",f={A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G"},w={THREE_QUARTER_FLAT:-150,FLAT:-100,QUARTER_FLAT:-50,NATURAL:0,QUARTER_SHARP:50,SHARP:100,THREE_QUARTER_SHARP:150},M={_1:1,_2:.5,_4:.25,_8:.125,_16:.0625,_32:.03125,_64:.015625,_128:.0078125},L={WHOLE:1*M._1,HALF:1*M._2,HALF_DOT:1.5*M._2,QUARTER:1*M._4,QUARTER_DOT:1.5*M._4,EIGHTH:1*M._8,EIGHTH_DOT:1.5*M._8,SIXTEENTH:1*M._16,SIXTEENTH_DOT:1.5*M._16,THIRTY_SECOND:1*M._32,THIRTY_SECOND_DOT:1.5*M._32,SIXTY_FOURTH:1*M._64,SIXTY_FOURTH_DOT:1.5*M._64,HUNDRED_TWENTY_EIGHTH:1*M._128,HUNDRED_TWENTY_EIGHTH_DOT:1.5*M._128,MINIM:1*M._2,MINIM_DOT:1.5*M._2,CROTCHET:1*M._4,CROTCHET_DOT:1.5*M._4,QUAVER:1*M._8,QUAVER_DOT:1.5*M._8,SEMI_QUAVER:1*M._16,SEMI_QUAVER_DOT:1.5*M._16,DEMI_SEMI_QUAVER:1*M._32,DEMI_SEMI_QUAVER_DOT:1.5*M._32,HEMI_DEMI_SEMI_QUAVER:1*M._64,HEMI_DEMI_SEMI_QUAVER_DOT:1.5*M._64,SEMI_HEMI_DEMI_SEMI_QUAVER:1*M._128,SEMI_HEMI_DEMI_SEMI_QUAVER_DOT:1.5*M._128},O={AF:new i(f.A,w.FLAT,8),A:new i(f.A,w.NATURAL,9),AS:new i(f.A,w.SHARP,10),BF:new i(f.B,w.FLAT,10),B:new i(f.B,w.NATURAL,11),BS:new i(f.B,w.SHARP,0),CF:new i(f.C,w.FLAT,11),C:new i(f.C,w.NATURAL,0),CS:new i(f.C,w.SHARP,1),DF:new i(f.D,w.FLAT,1),D:new i(f.D,w.NATURAL,2),DS:new i(f.D,w.SHARP,3),EF:new i(f.E,w.FLAT,3),E:new i(f.E,w.NATURAL,4),ES:new i(f.E,w.SHARP,5),FF:new i(f.F,w.FLAT,4),F:new i(f.F,w.NATURAL,5),FS:new i(f.F,w.SHARP,6),GF:new i(f.G,w.FLAT,6),G:new i(f.G,w.NATURAL,7),GS:new i(f.G,w.SHARP,8)},N=[[O.C],[O.CS,O.DF],[O.D],[O.DS,O.EF],[O.E],[O.F],[O.FS,O.GF],[O.G],[O.GS,O.AF],[O.A],[O.AS,O.BF],[O.B]],l={A:new s(O.A,3,w.FLAT),BF:new s(O.BF,2,w.SHARP),C:new s(O.C,0,w.NATURAL),D:new s(O.D,10,w.FLAT),EF:new s(O.EF,9,w.SHARP),F:new s(O.F,7,w.SHARP),G:new s(O.G,5,w.FLAT)};return{FLAT_HTML:H,SHARP_HTML:a,PITCH:O,PITCH_MOD:w,TRANSPOSITION:l,DURATION_UNIT:M,DURATION:L,ZsTempo:e,init:function(){T()},getBeatDurationSec:function(t){return _(t)},getPitch:function(t){return A(t)},getTransposition:function(t){return r(t)},transpose:function(t,n){return o(t,n)},getModUnicode:function(t){return E(t)},test:function(){return R()}}}(zsUtil);