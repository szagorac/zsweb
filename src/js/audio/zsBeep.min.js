var zsBeep=function(e){"use strict";function n(e){this.message=e,this.name="ZsBeepException"}function i(){p("resetConfig: BEEP"),I.masterGainVal=1}function t(i,t){if(!e)throw new n("Invalid libraries. Required: zsUtil");if(p("Init Beep"),!i)return g("_initBeep: invalid context"),void f(!1);G=i,y(t)&&(t=G.destination),R=d(),v(I.masterGainVal),x=a(),h=V(),o(I.frequency),B=d(),B.gain.setValueAtTime(0,0),h.connect(B),B.connect(R),R.connect(t),f(!0)}function a(){var n=I.durationSec,i=I.attackTime*n,t=I.decayTime*n,a=I.sustainTime*n,r=I.releaseTime*n;i<0&&(i=0),t<0&&(t=0),a<0&&(a=0),r<0&&(r=0);var u=I.sustainLevel;u<0?u=0:u>1&&(u=1);var c=i+t+a+r;if(c=e.round(c,5),c>n){g("Invalid total duration: "+c+" longer than required: "+n);var l=c-n;a>l?a-=l:r>l?r-=l:i>l&&(i-=l)}return new e.createEnvelope(i,t,u,a,r)}function r(){E||!q||y(B)||(h=V(),o(I.frequency),h.connect(B),h.start(),E=!0)}function u(){if(E&&!y(h)&&!y(B)){var e=G.currentTime,n=e+.1;B.gain.setValueAtTime(0,e),h.stop(n),h=null,E=!1}}function c(e){e?r():u()}function l(n){I.frequency!==n&&(I.frequency=n);var i=e.toInt(n);o(i)}function o(e){if(!y(h)){var n=G.currentTime;h.frequency.linearRampToValueAtTime(e,n+.2)}}function s(){if(E&&q&&!y(x)&&!y(B)){var e=G.currentTime,n=B.gain;n.cancelScheduledValues(0);var i=e;n.setValueAtTime(.001,i);var t=i+x.at;n.linearRampToValueAtTime(1,t);var a=t+x.dt;n.linearRampToValueAtTime(x.sl,a);var r=a+x.st;n.setValueAtTime(x.sl,r);var u=r+x.rt;n.linearRampToValueAtTime(1e-4,u)}}function f(e){y(e)||(p("setReady: "+e),q=e)}function m(){return q}function v(n,i){if(G&&R){e.isString(n)&&(n=e.toFloat(n));var t=I.masterGainVal;if(e.isNumeric(n)){t=n,t<0?t=0:t>1&&(t=1);var a=I.masterGainVal,r=R.gain.value;if(a!==t&&(I.masterGainVal=t),r!==t)if(!y(i)&&e.isNumeric(i)){var u=e.msecToSec(i),c=(T(),G.currentTime+u);R.gain.linearRampToValueAtTime(t,c)}else R.gain.setValueAtTime(t,T())}else g("_setMasterGain: Invalid gain level: "+n)}else g("setMasterGain: invalid context of master gain")}function T(){return y(G)?0:G.currentTime}function d(){return G?G.createGain():(g("_createGainNode: Audio context is not initialised!!"),null)}function V(){return G?G.createOscillator():(g("_createGainNode: Audio context is not initialised!!"),null)}function g(n){e.logError(n,A)}function p(n){e.log(n,A)}function y(n){return e.isNull(n)}const A="ZsBeep: ";var G=null,q=!1,R=null,h=null,B=null,x=null,E=!1,I={masterGainVal:1,frequency:1100,durationSec:.1,attackTime:0,decayTime:0,sustainLevel:1,sustainTime:.2,releaseTime:.8};return{init:function(e,n){t(e,n)},reset:function(){i()},setGain:function(e,n){v(e,n)},isReady:function(){return m()},play:function(){return s()},switch:function(e){return c(e)},setFreqenecy:function(e){return l(e)}}}(zsUtil);