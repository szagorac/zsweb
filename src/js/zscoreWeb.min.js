var zscore=function(t,e,n,i,a,r,o){"use strict";function s(t){this.message=t,this.name="ZScoreException"}function l(t,e,n,i,a,r,o,s){this.xStart=t,this.xEnd=e,this.yStart=n,this.yEnd=i,this.beatStartNum=a,this.beatStartDenom=r,this.beatEndNum=o,this.beatEndDenom=s}function c(t,e,n,i){this.id=t,this.no=e,this.imgFileName=n,this.imgFileUrl=i,this.isLoaded=!1,this.img=new Image,this.img.pageId=t}function f(t,e){this.id="partBtn"+t,this.class="partListButton",this.onclick="onPartSelect('"+e+"')"}function d(){}function u(){if(!un.isInitialised){if(!(t&&e&&n&&i&&a))throw new s("Invalid libraries. Required: zsUtil, zsNet, zsSvg, zsAudio and zsMusic");t.setRunMode(pe),de("init: "),cn=t.isTouchDevice(),fn=t.isSafari(navigator),de("init: IsTouch Device: "+cn+" isSafari: "+fn),un.fontCanvas=o.createElement("canvas"),un.canvasCtx=un.fontCanvas.getContext("2d"),t.listen("resize",r,x),t.listen("orientationchange",r,x),b(),T(),y(),un.isInitialised=!0}}function p(){m(un.topStave),m(un.bottomStave)}function m(e){if(!le(e)&&!le(e.config)){var n=e.config;t.setElementIdAttributes(n.positionLineId,n.posLineConf),t.setElementIdAttributes(n.beatBallId,n.posBallConf)}}function v(){un.isInitialised?(de("onStateBtnClick: zscore initialised"),e.isConnected()||(de("onStateBtnClick: zscore not connected, reconnecting..."),L())):(de("onStateBtnClick: initialising"),u())}function g(e){t.arrContains(un.score.parts,e)?(un.part.name=e,Tt(e),t.makeInVisible(dn.idPartsListOuterDiv)):de("onPartSelection: unexpected part: "+e)}function S(t){}function I(){P()}function b(){e.init(dn.connectionPreference,dn.appUrlSse,dn.appUrlWebsockets,dn.appUrlHttp,R,h)}function y(){le(i)?fe("initAudio: invalid zsAudio lib"):i.init(ln,0)}function P(){le(i)?fe("resetAudio: invalid zsAudio lib"):i.reset()}function T(){n.init()}function x(e){if(!t.isObject(this))return null}function h(t,n){switch(t){case e.OPEN:k(n);break;case e.CLOSED:B(n);break;case e.ERROR:A(n);break;default:fe("Unknown Connection Event State: "+t+" for type: "+n)}}function k(t){de(t+" connection opened."),E(t)}function B(t){de(t+" connection closed."),N(t)}function A(t){de(t+" connection error."),C(t)}function E(t){un.isConnected=!0,un.connectionType=t,un.reconnectAttmpts=0,w(dn.connectedRectStyle,dn.connectedBtnAttrib,dn.connectedTxtStyle,be)}function N(t){un.isConnected=!1,w(dn.disconnectedRectStyle,dn.disconnectedBtnAttrib,dn.disconnectedTxtStyle,Te),L(t)}function C(t){un.isConnected=!1,w(dn.errorRectStyle,dn.errorBtnAttrib,dn.errorTxtStyle,xe),L(t)}function w(e,n,i,a){var r=t.getElement(dn.idServerStatusRect);le(r)||oe(r,e);var o=t.getElement(dn.idServerStatusBtn);le(o)||se(o,n);var s=t.getElement(dn.idServerStatusTxt);le(s)||(oe(s,i),s.textContent=a)}function L(t){e.reconnect(t,!0)}function R(t,e){un.isConnected||E(),le(t)||(e||I(),ce(t.scoreInfo)&&D(t.scoreInfo),ce(t.partInfo)&&ot(t.partInfo),ce(t.pageInfo)&&$(t.pageInfo),ce(t.mapInfo)&&V(t.mapInfo),ce(t.bpm)&&0!=t.bpm&&z(t.bpm),ce(t.actions)&&kt(t.actions))}function D(e){t.isObject(e)&&(ce(e.title)&&O(e.title),ce(e.instruments)&&bt(e.instruments),ce(e.bpm)&&U(e.bpm),ce(e.scoreDir)&&M(e.scoreDir))}function O(e){un.score.title!==e&&(un.score.title=e,un.score.noSpaceTitle=t.replaceEmptySpaces(e,ve),n.setElementText(dn.idTitle,e))}function M(t){un.scoreDir!==t&&(un.scoreDir=t)}function U(t){un.tempo!==t&&(un.tempo=t,n.setElementText(dn.idTempoBpm,t))}function z(e){var n=t.toInt(e);if(!le(n)){var i=un.tempo,a=n/i;un.tempoModifier=a,U(n),un.isPlaying?F(a):j()}}function V(e){if(!le(e.map)&&!le(e.pageId)){e.pageId;var n=e.staveId,i=e.map,a=un[n];if(!le(a)){var r=a.config.xLeftMargin,o=JSON.parse(JSON.stringify(i));if(t.isArray(o)){for(var s={},l=0;l<o.length;l++)_(s,o[l],r);a.beatMap=s,H(n)}}}}function _(t,e,n){if(!(le(t)||le(e)||le(e.beatStartNum))){var i=e.beatStartNum,a=e.xStart+n,r=e.xEnd+n,o=new l(a,r,e.yStart,e.yEnd,i,e.beatStartDenom,e.beatEndNum,e.beatEndDenom);t[i]=o}}function F(t){Y(un.topStave.timeline,t),Y(un.bottomStave.timeline,t)}function Y(t,e){if(!le(t)){var n=t.timeScale(),i=n*e;t.timeScale(i)}}function j(){G(un.topStave),G(un.bottomStave)}function H(t){le(t)||G(un[t])}function G(t){if(!le(t)){var e=gsap.timeline({onComplete:q,onCompleteParams:[t.id],paused:!0}),n=t.beatMap;if(!le(n)){var i=t.config.positionLineId,r=t.config.beatBallId,o=t.config.ballYmax,s=!0;for(var l in n){var c=n[l],f=un.tempo,d=a.getBeatDurationSec(f),u=c.beatStartNum;if(s){var p=dn.beatIdPrefix+(u-1),m=c.xStart,v=Q(i,0,m,p,0);e.add(v,Ae);var g=W(r,0,m,p);e.add(g,Ee),s=!1}m=c.xEnd,p=dn.beatIdPrefix+u;var S=dn.tweenIdPrefix+p,I=Q(i,d,m,p,u),b=W(r,d,m,p),y=Z(r,d/2,o,p);S=I.vars.id;e.addLabel(S,Ee),e.add(I,Ee),e.add(b,Ae),e.add(y,S)}ce(t.currentBeat)&&jt(e,t.currentBeat),t.timeline=e}}}function Q(e,n,i,a,r){var o=dn.tweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:o,duration:n,attr:{x1:i,x2:i},ease:"none",onStart:J,onStartParams:[a,r],onComplete:K,onCompleteParams:[a,r]})}function W(e,n,i,a){var r=dn.ballTweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:r,duration:n,attr:{cx:i},ease:"none"})}function Z(e,n,i,a){var r=dn.ballTweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:r,duration:n,attr:{cy:i,r:2},ease:"power1.out",autoAlpha:.5,repeat:1,yoyo:!0})}function q(t){ue("onTimelineComplete stave: "+t);var e=un[t];ce(e)&&(e.isRunning=!1),ce(e.timeline)&&e.timeline.pause(0)}function J(t,e){var n=i.getCurrentTime();un.audioTlBeatTime=n,ue("onBeatStart: beat: "+t+" beatNo: "+e+" beatTime: "+n),X(e,t)}function K(t,e){var n=i.getCurrentTime(),a=n-un.startTimeTl;ue("onBeatEnd: beat: "+t+" beatNo: "+e+" elapsedTime: "+a)}function X(e,n){t.isNumeric(e)&&(t.isNull(n)&&(n=dn.beatIdPrefix+e),un.currentBeatId=n,un.currentBeatNo=e)}function $(t){if(!le(t.staveId)){var e=t.staveId,n=un[e];le(n)?fe("processPageinfo: Invalid stave for id: {}",e):(ce(t.filename)&&(n.filename=t.filename),ce(t.pageId)&&(n.pageId=t.pageId),ce(t.rndPageId)?n.rndPageId=t.rndPageId:n.rndPageId=null,tt(n))}}function tt(e){if(!le(e)){var n=e.config;if(!le(n)){var i=null,a=e.pageId;ce(e.rndPageId)&&(a=e.rndPageId);var r=nt(a);i=le(r)?et(e.fileName):r.src;var o=t.getElement(n.imgId);o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),o.setAttribute("href",i)}}}function et(t){return un.scoreDir+un.score.noSpaceTitle+ge+t}function nt(t){var e=un.part.pages[t];return le(e)?null:e.img}function it(t){var e=un.part.pages[t];ce(e)&&(e.isLoaded=!0),un.pageNoToLoad--,0===un.pageNoToLoad&&rt(),at(un.pageNoToLoad)}function at(t){if(t>0){var e=ye+" "+t;w(dn.errorRectStyle,dn.errorBtnAttrib,dn.errorTxtStyle,e)}else w(dn.connectedRectStyle,dn.connectedBtnAttrib,dn.connectedTxtStyle,Pe)}function rt(){de("onPageLoadComplete: ");var t=un.part.pages,e=!0;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i.isLoaded||(de("onPageLoadComplete: page: "+n+" is not loaded, retying load"),dt(i.no),e=!1)}e&&(de("All Pages loaded: "),un.isReady=!0,xt())}function ot(e){if(ce(e.name)&&(un.part.name=e.name,n.setElementText(dn.idInstrument,e.name)),ce(e.pageRanges)){var i=e.pageRanges;if(t.isArray(i))for(var a=0;a<i.length;a++)It(i[a]);else It(i)}ce(e.imgDir)&&(un.part.imgDir=e.imgDir),ce(e.imgPageNameToken)&&(un.part.imgPageNameToken=e.imgPageNameToken),ce(e.imgContPageName)&&(un.part.imgContPageName=e.imgContPageName),ce(e.contPageNo)&&(un.part.contPageNo=e.contPageNo),st()}function st(){var e=un.part,n=e.pageRanges;if(t.isArray(n)){for(var i=0;i<n.length;i++)ft(n[i]);lt(),ct()}}function lt(){var t=vt();un.pageNoToLoad++,ut(t)}function ct(){var t=mt();un.pageNoToLoad++,ut(t)}function ft(e){if(t.isObject(e)){var n=1,i=1;ce(e.start)&&(n=t.toInt(e.start)),ce(e.end)&&(i=t.toInt(e.end));var a=un.pageNoToLoad+(i-n+1);un.pageNoToLoad=a;for(var r=n;r<=i;r++)dt(r)}}function dt(t){var e=pt(t);ut(e)}function ut(t){if(!le(t)){var e=t.imgFileUrl;le(e)||t.loadImg(e,t.id)}}function pt(e){var n=St(e),i=un.part.pages[n];if(ce(i))return i;var a=un.part.imgPageNameToken;a=le(a)?gt(e):t.replace(a,dn.pageNoToken,""+e);var r=un.part.imgDir+a;i=new c(n,e,a,r);return un.part.pages[n]=i,i}function mt(){var t=un.part.contPageNo,e=St(t),n=un.part.pages[e];if(ce(n))return n;var i=un.part.imgContPageName,a=un.part.imgDir+i;n=new c(e,t,i,a);return un.part.pages[e]=n,n}function vt(){var t=un.part.blankPageNo,e=St(t),n=un.part.pages[e];if(ce(n))return n;var i=dn.blankPageUrl,a=dn.blankPageUrl;n=new c(e,t,i,a);return un.part.pages[e]=n,n}function gt(t){return un.score.noSpaceTitle+ve+instrumentName+"_page"+t+".png"}function St(t){return dn.pageIdPrefix+t}function It(t){if(!(le(t)||le(t.start)||le(t.end))){var e=t.start,n=t.end,i={start:e,end:n};un.part.pageRanges=[],un.part.pageRanges.push(i)}}function bt(e){var n=[];if(t.isArray(e))for(var i=0;i<e.length;i++){var a=e[i];t.arrContains(dn.filterOutParts,a)||n.push(a)}else t.arrContains(dn.filterOutParts,a)||n.push(e);t.arrEquals(un.score.parts,n)||(un.score.parts=n),yt(n)?Tt(un.part.name):Pt(n)}function yt(e){if(le(un.part.name)||!t.isArray(e))return!1;for(var n=un.part.name,i=0;i<e.length;i++)if(n===e[i])return!0;return!1}function Pt(e){var n=t.getElement(dn.idParts);if(!le(n)){t.removeElementChildren(n);for(var i=0;i<e.length;i++){var a=e[i];if(!t.arrContains(dn.filterOutParts,a)){var r=new f(i+1,a),o=t.createDiv(),s=t.createButton(r);t.setText(s,a),t.addChildToParent(o,s),t.addChildToParent(n,o)}}t.makeVisible(dn.idPartsListOuterDiv)}}function Tt(t){var n=new d;n[en]=t,e.sendEvent(Xe,n)}function xt(){var t=new d;t[en]=un.part.name,e.sendEvent($e,t)}function ht(t){var n=new d;n[nn]=t,e.sendEvent(tn,n)}function kt(e){var n=null,i=[],a={};if(t.isArray(e))for(var r=0;r<e.length;r++){var o=e[r];ce(o.type)&&(n=o.type),ce(o.targets)&&(i=o.targets),ce(o.params)&&(a=o.params),Bt(n,i,a)}}function Bt(e,n,i){if(t.logDebug("doAction: "+e),!le(e))switch(e){case"PING":re(i);break;case"START":te(n);break;case"STOP":$t();break;case"SEMAPHORE_ON":Wt(i);break;case"SEMAPHORE_OFF":Zt(i);break;case"ACTIVATE":Ht(n,i);break;case"BEAT":_t(n,i);break;case"START_MARK":Mt(n,i);break;case"INSTRUMENT_SLOTS":Et(i);break;case"RESET_INSTRUMENT_SLOTS":At();break;default:fe("doAction: Unknown actionType: "+e)}}function At(){Lt(),Ct()}function Et(t){if(!le(t)){var e=t[sn];wt(e),Nt()}}function Nt(){t.makeVisible(dn.idInstControls)}function Ct(){t.makeInVisible(dn.idInstControls)}function wt(e){if(!le(e)){var n=t.csvToArr(e);if(!(le(n)||n.length<=0)){var i=un.score.parts;if(!(le(i)||i.length<=0))for(var a=0;a<i.length;a++){var r=a+1;a<n.length?Rt(n[a],r):Dt(r)}}}}function Lt(){var t=un.score.parts;if(!(le(t)||t.length<=0))for(var e=0;e<t.length;e++){var n=e+1;Ot(n)}}function Rt(e,i){if(!le(e)&&!le(i)){var a=dn.idInstSlotTxtPrefix+i,r=dn.idInstSlotBtnPrefix+i,o=dn.idInstSlotPrefix+i;t.setElementIdAttributes(o,dn.instSlotActiveBtnAttrib),n.setElementText(a,e.trim()),t.setElementIdStyleProperty(a,dn.instSlotTxtActiveStyle),t.setElementIdStyleProperty(r,dn.instSlotBtnActiveStyle)}}function Dt(e){var i=dn.idInstSlotTxtPrefix+e,a=dn.idInstSlotBtnPrefix+e,r=dn.idInstSlotPrefix+e;t.setElementIdAttributes(r,dn.instSlotInActiveBtnAttrib),n.setElementText(i,me),t.setElementIdStyleProperty(i,dn.instSlotTxtInActiveStyle),t.setElementIdStyleProperty(a,dn.instSlotBtnInActiveStyle)}function Ot(e){var n=dn.idInstSlotTxtPrefix+e,i=dn.idInstSlotBtnPrefix+e,a=dn.idInstSlotPrefix+e;t.makeInVisible(n),t.makeInVisible(i),t.makeInVisible(a)}function Mt(e,n){if(!le(n)&&!le(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Ut(e[i],n);else Ut(e,n)}function Ut(t,e){if(!le(e)){var i=un[t],a=e[on];if(!le(i)&&!le(a)){var r=i.beatMap;if(!le(r)){var o=r[a];if(!le(o)){var s=o.xStart-1,l=zt(i);n.setLineX(l,s,s),Vt(l,!0)}}}}}function zt(e){return t.getElement(e.config.startLineId)}function Vt(e,n){n?t.makeElementVisible(e):t.makeElementInVisible(e)}function _t(e,n){if(!le(n)&&!le(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Ft(e[i],n);else Ft(e,n)}function Ft(t,e){var n=un[t],i=e[on];Yt(n,i)}function Yt(t,e){if(!le(t)&&!le(e)){var n=i.getCurrentTime();ue("setStaveBeat: stave: "+t.id+" beat: "+e+" time: "+n),jt(t.timeline,e),t.currentBeat=e}}function jt(t,e){if(!le(t)){var n=dn.tweenIdPrefix+dn.beatIdPrefix+e,i=t.labels;n in i?t.seek(n):ue("setTimelineBeat: Invalid beat "+n)}}function Ht(e,n){if(!le(n)&&!le(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Gt(e[i],n);else Gt(e,n)}function Gt(t,e){var n=un[t],i=e[an],a=e[rn];Qt(n,i,a)}function Qt(e,n,i){if(!(le(e)||le(n)||le(i))){if(n)t.setElementIdStyleProperty(e.config.maskId,dn.activeStaveStyle);else{t.setElementIdStyleProperty(e.config.maskId,dn.inactiveStaveStyle);var a=zt(e);Vt(a,!1)}i&&ne(e.timeline)}}function Wt(t){le(t)||Jt(t.lightNo,t.colourId)}function Zt(t){le(t)||Kt(t.lightNo,ze)}function qt(){Kt(4,ze),Kt(1,Ce)}function Jt(t,e){var n=Xt(e);Kt(t,n)}function Kt(e,i){if(!le(e)&&!le(i))for(var a=t.toInt(e),r=1;r<=a;r++){var o=dn.idSemaphorePrefix+r;n.setElementColour(o,i)}}function Xt(t){var e;switch(t||(t=1),t){case 4:e=Ce;break;case 3:e=we;break;case 2:e=Le;break;case 1:default:e=Ne}return e}function $t(){ie(),un.isPlaying=!1,qt(),p()}function te(e){if(t.isArray(e))for(var n=0;n<e.length;n++)ee(e[n]);else ee(e)}function ee(t){if(!le(t)){var e=un[t];if(!le(e)){var n=e.timeline;le(n)||(ne(n),un.isPlaying=!0)}}}function ne(t){if(le(t))fe("startTimeline: invalid timeline");else{var e=t.progress();e>0&&e<1?t.resume():t.play(0)}}function ie(){ae(un.topStave.timeline),ae(un.bottomStave.timeline),un.bottomStave.isPlaying=!1,un.topStave.isPlaying=!1}function ae(t){le(t)?fe("stopTimeline: invalid timeline"):t.pause()}function re(e){t.isObject(e)&&ce(e.sendTimeMs)&&ht(e.sendTimeMs)}function oe(e,n){t.setElementStyleProperty(e,n)}function se(e,n){t.setElementAttributes(e,n)}function le(e){return t.isNull(e)}function ce(e){return t.isNotNull(e)}function fe(e){t.logError(e)}function de(e){t.log(e)}function ue(e){t.logDebug(e)}const pe="dev",me="",ve="_",ge="/",Se="AV",Ie="FullScore",be="Connected",ye="Loading",Pe="READY",Te="Reconnecting",xe="Error",he="visible",ke="hidden",Be="none",Ae="<",Ee=">",Ne="green",Ce="red",we="orange",Le="yellow",Re="white",De="black",Oe="blue",Me="grey",Ue="lightgrey",ze=Be,Ve=ze,_e=Re,Fe=Ne,Ye=Ce,je=we,He=Oe,Ge=Me,Qe=Ne,We=Ce,Ze=we,qe=Re,Je=Re,Ke=De,Xe="PART_REG",$e="PART_READY",tn="PING",en="part",nn="serverTime",an="isActive",rn="isPlay",on="beatNo",sn="csvInstruments";var ln=["/audio/violin-tuning.mp3"],cn=null,fn=null,dn={connectionPreference:"ws,sse,poll",defaultConnectionType:e.WEBSOCKET,appUrlHttp:"/htp",appUrlSse:"/sse",appUrlWebsockets:"/wsoc",pageNoToken:"@PgNo@",pageIdPrefix:"p",tsBaseBeatDenom:8,tsY:0,beatIdPrefix:"b",tweenIdPrefix:"tw",beatTweenIdPrefix:"btw",ballTweenIdPrefix:"bltw",idTitle:"title",idServerStatusRect:"srvrStatusRect",idServerStatusTxt:"srvrStatusTxt",idServerStatusBtn:"srvrStatBtn",idParts:"parts",idPartsListOuterDiv:"partListOuterDiv",idInstrument:"part",idInstControls:"instControls",idInstSlotPrefix:"instSlot",idInstSlotTxtPrefix:"instSlotTxt",idInstSlotBtnPrefix:"instSlotRect",idTempoBpm:"tmpBpm",idSemaphorePrefix:"semC",blankPageUrl:"img/blankStave.png",filterOutParts:[Se,Ie],connectedRectStyle:{fill:Fe,stroke:Qe,"stroke-width":"0px",visibility:he,opacity:1},disconnectedRectStyle:{fill:Ye,stroke:We,"stroke-width":"1px",visibility:he,opacity:1},errorRectStyle:{fill:je,stroke:Ze,"stroke-width":"1px",visibility:he,opacity:1},connectedTxtStyle:{fill:qe},disconnectedTxtStyle:{fill:Je},errorTxtStyle:{fill:Ke},activeStaveStyle:{fill:Ve,stroke:He,"stroke-width":"1px",visibility:he,opacity:.5},inactiveStaveStyle:{fill:_e,stroke:Ge,"stroke-width":"1px",visibility:he,opacity:.4},instSlotBtnActiveStyle:{fill:Re,stroke:De,"stroke-width":"1px",visibility:he,opacity:1},instSlotBtnInActiveStyle:{fill:Ue,stroke:Be,visibility:he,opacity:1},instSlotTxtActiveStyle:{fill:De,visibility:he,opacity:1},instSlotTxtInActiveStyle:{fill:De,stroke:Be,visibility:ke,opacity:0},instSlotActiveBtnAttrib:{filter:"url(#dropshadow)"},instSlotInActiveBtnAttrib:{filter:"none"},connectedBtnAttrib:{filter:""},disconnectedBtnAttrib:{filter:"url(#dropshadow)"},errorBtnAttrib:{filter:"url(#dropshadow)"},topStave:{gId:"stvTop",imgId:"stvTopImg",startLineId:"stvTopStartLine",positionLineId:"stvTopPosLine",beatBallId:"stvTopBeatBall",maskId:"stvTopMask",ballYmax:84,xLeftMargin:31.5,posLineConf:{x1:"95",y1:"80",x2:"95",y2:"281"},posBallConf:{cx:"95",cy:"110",r:"4"}},bottomStave:{gId:"stvBot",imgId:"stvBotImg",startLineId:"stvBotStartLine",positionLineId:"stvBotPosLine",beatBallId:"stvBotBeatBall",maskId:"stvBotMask",ballYmax:305,xLeftMargin:31.5,posLineConf:{x1:"95",y1:"301",x2:"95",y2:"502"},posBallConf:{cx:"95",cy:"331",r:"4"}}},un={isPlaying:!1,isReady:!1,score:{title:"ZScore",noSpaceTitle:"ZScore",instrument:"Part View",parts:["Part View"],firstPageNo:1,lastPageNo:2},part:{name:"Part View",imgDir:null,imgPageNameToken:null,imgContPageName:null,blankPageNo:0,contPageNo:6666,pageRanges:[{start:1,end:1}],pages:{}},topStave:{id:"topStave",config:dn.topStave,pageId:"p0",rndPageId:null,filename:"img/blankStave.png",beatMap:null,timeline:null,isActive:!0,isPlaying:!1,currentBeat:null},bottomStave:{id:"bottomStave",config:dn.bottomStave,pageId:"p0",rndPageId:null,filename:"img/blankStave.png",beatMap:null,timeline:null,isActive:!1,isPlaying:!1,currentBeat:null},startTimeTl:0,currentBeatId:"b0",currentBeatNo:0,tempo:0,tempoModifier:1,scoreDir:"/score/",currentTickTimeSec:0,nextBeatTickTimeSec:0,audioTlBeatTime:0,audioTickBeatTime:0,isConnected:!1,isInitialised:!1,connectionType:null,pageNoToLoad:0};return c.prototype.loadImg=function(t){this.img.src=t,this.img.onload=function(){de("pageImgOnLoad: id: "+this.pageId),it(this.pageId)}},{onStateBtn:function(){v()},onPartSelect:function(t){g(t)},onInstrumentSelect:function(t){S(t)}}}(zsUtil,zsNet,zsSvg,zsAudio,zsMusic,window,document);