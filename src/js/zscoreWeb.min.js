var zscore=function(t,e,n,i,a,r,o){"use strict";function s(t){this.message=t,this.name="ZScoreException"}function l(t,e,n,i,a,r,o,s){this.xStart=t,this.xEnd=e,this.yStart=n,this.yEnd=i,this.beatStartNum=a,this.beatStartDenom=r,this.beatEndNum=o,this.beatEndDenom=s}function c(t,e,n,i){this.id=t,this.no=e,this.imgFileName=n,this.imgFileUrl=i,this.isLoaded=!1,this.img=new Image,this.img.pageId=t}function f(t,e){this.id="partBtn"+t,this.class="partListButton",this.onclick="onPartSelect('"+e+"')"}function d(t,e){this.onclick="onInstrumentSelect("+t+",'"+e+"')"}function u(){this.onclick=""}function p(){}function m(){if(!Ln.isInitialised){if(!(t&&e&&n&&i&&a))throw new s("Invalid libraries. Required: zsUtil, zsNet, zsSvg, zsAudio and zsMusic");t.setRunMode(xe),Te("init: "),Bn=t.isTouchDevice(),wn=t.isSafari(navigator),Te("init: IsTouch Device: "+Bn+" isSafari: "+wn),Ln.fontCanvas=o.createElement("canvas"),Ln.canvasCtx=Ln.fontCanvas.getContext("2d"),t.listen("resize",r,E),t.listen("orientationchange",r,E),P(),x(),T(),Ln.isInitialised=!0}}function v(){g(Ln.topStave),g(Ln.bottomStave)}function g(e){if(!be(e)&&!be(e.config)){var n=e.config;t.setElementIdAttributes(n.positionLineId,n.posLineConf),t.setElementIdAttributes(n.beatBallId,n.posBallConf)}}function S(){Ln.isInitialised?(Te("onStateBtnClick: zscore initialised"),e.isConnected()||(Te("onStateBtnClick: zscore not connected, reconnecting..."),O())):(Te("onStateBtnClick: initialising"),m())}function I(e){t.arrContains(Ln.score.parts,e)?(Ln.part.name=e,Et(e),t.makeInVisible(Cn.idPartsListOuterDiv)):Te("onPartSelection: unexpected part: "+e)}function b(t,e){be(t)||be(e)||be(Ln.part.name)||Nt(t,e,Ln.part.name)}function y(){k()}function P(){e.init(Cn.connectionPreference,Cn.appUrlSse,Cn.appUrlWebsockets,Cn.appUrlHttp,D,h)}function T(){be(i)?Pe("initAudio: invalid zsAudio lib"):i.init(Nn,0)}function k(){be(i)?Pe("resetAudio: invalid zsAudio lib"):i.reset()}function x(){n.init()}function E(e){if(!t.isObject(this))return null}function h(t,n){switch(t){case e.OPEN:A(n);break;case e.CLOSED:N(n);break;case e.ERROR:B(n);break;default:Pe("Unknown Connection Event State: "+t+" for type: "+n)}}function A(t){Te(t+" connection opened."),w(t)}function N(t){Te(t+" connection closed."),C(t)}function B(t){Te(t+" connection error."),L(t)}function w(t){Ln.isConnected=!0,Ln.connectionType=t,Ln.reconnectAttmpts=0,R(Cn.connectedRectStyle,Cn.connectedBtnAttrib,Cn.connectedTxtStyle,we)}function C(t){Ln.isConnected=!1,R(Cn.disconnectedRectStyle,Cn.disconnectedBtnAttrib,Cn.disconnectedTxtStyle,Re),O(t)}function L(t){Ln.isConnected=!1,R(Cn.errorRectStyle,Cn.errorBtnAttrib,Cn.errorTxtStyle,Oe),O(t)}function R(e,n,i,a){var r=t.getElement(Cn.idServerStatusRect);be(r)||Se(r,e);var o=t.getElement(Cn.idServerStatusBtn);be(o)||Ie(o,n);var s=t.getElement(Cn.idServerStatusTxt);be(s)||(Se(s,i),s.textContent=a)}function O(t){e.reconnect(t,!0)}function D(t,e){Ln.isConnected||w(),be(t)||(e||y(),ye(t.scoreInfo)&&M(t.scoreInfo),ye(t.partInfo)&&ct(t.partInfo),ye(t.pageInfo)&&et(t.pageInfo),ye(t.mapInfo)&&Y(t.mapInfo),ye(t.bpm)&&0!=t.bpm&&z(t.bpm),ye(t.actions)&&Bt(t.actions))}function M(e){t.isObject(e)&&(ye(e.title)&&V(e.title),ye(e.instruments)&&Tt(e.instruments),ye(e.bpm)&&U(e.bpm),ye(e.scoreDir)&&_(e.scoreDir))}function V(e){Ln.score.title!==e&&(Ln.score.title=e,Ln.score.noSpaceTitle=t.replaceEmptySpaces(e,he),n.setElementText(Cn.idTitle,e))}function _(t){Ln.scoreDir!==t&&(Ln.scoreDir=t)}function U(t){Ln.tempo!==t&&(Ln.tempo=t,n.setElementText(Cn.idTempoBpm,t))}function z(e){var n=t.toInt(e);if(!be(n)){var i=Ln.tempo,a=n/i;Ln.tempoModifier=a,U(n),Ln.isPlaying?H(a):G()}}function Y(e){if(!be(e.map)&&!be(e.pageId)){e.pageId;var n=e.staveId,i=e.map,a=Ln[n];if(!be(a)){var r=a.config.xLeftMargin,o=JSON.parse(JSON.stringify(i));if(t.isArray(o)){for(var s={},l=0;l<o.length;l++)F(s,o[l],r);a.beatMap=s,Q(n)}}}}function F(t,e,n){if(!(be(t)||be(e)||be(e.beatStartNum))){var i=e.beatStartNum,a=e.xStart+n,r=e.xEnd+n,o=new l(a,r,e.yStart,e.yEnd,i,e.beatStartDenom,e.beatEndNum,e.beatEndDenom);t[i]=o}}function H(t){j(Ln.topStave.timeline,t),j(Ln.bottomStave.timeline,t)}function j(t,e){if(!be(t)){var n=t.timeScale(),i=n*e;t.timeScale(i)}}function G(){W(Ln.topStave),W(Ln.bottomStave)}function Q(t){be(t)||W(Ln[t])}function W(t){if(!be(t)){var e=gsap.timeline({onComplete:K,onCompleteParams:[t.id],paused:!0}),n=t.beatMap;if(!be(n)){var i=t.config.positionLineId,r=t.config.beatBallId,o=t.config.ballYmax,s=!0;for(var l in n){var c=n[l],f=Ln.tempo,d=a.getBeatDurationSec(f),u=c.beatStartNum;if(s){var p=Cn.beatIdPrefix+(u-1),m=c.xStart,v=Z(i,0,m,p,0);e.add(v,_e);var g=q(r,0,m,p);e.add(g,Ue),s=!1}m=c.xEnd,p=Cn.beatIdPrefix+u;var S=Cn.tweenIdPrefix+p,I=Z(i,d,m,p,u),b=q(r,d,m,p),y=J(r,d/2,o,p);S=I.vars.id;e.addLabel(S,Ue),e.add(I,Ue),e.add(b,_e),e.add(y,S)}ye(t.currentBeat)&&te(e,t.currentBeat),t.timeline=e}}}function Z(e,n,i,a,r){var o=Cn.tweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:o,duration:n,attr:{x1:i,x2:i},ease:"none",onStart:X,onStartParams:[a,r],onComplete:$,onCompleteParams:[a,r]})}function q(e,n,i,a){var r=Cn.ballTweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:r,duration:n,attr:{cx:i},ease:"none"})}function J(e,n,i,a){var r=Cn.ballTweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:r,duration:n,attr:{cy:i,r:2},ease:"power1.out",autoAlpha:.5,repeat:1,yoyo:!0})}function K(t){ke("onTimelineComplete stave: "+t);var e=Ln[t];ye(e)&&(e.isRunning=!1),ye(e.timeline)&&e.timeline.pause(0)}function X(t,e){var n=i.getCurrentTime();Ln.audioTlBeatTime=n,ke("onBeatStart: beat: "+t+" beatNo: "+e+" beatTime: "+n),tt(e,t)}function $(t,e){var n=i.getCurrentTime(),a=n-Ln.startTimeTl;ke("onBeatEnd: beat: "+t+" beatNo: "+e+" elapsedTime: "+a)}function tt(e,n){t.isNumeric(e)&&(t.isNull(n)&&(n=Cn.beatIdPrefix+e),Ln.currentBeatId=n,Ln.currentBeatNo=e)}function et(t){if(!be(t.staveId)){var e=t.staveId,n=Ln[e];be(n)?Pe("processPageinfo: Invalid stave for id: {}",e):(ye(t.filename)&&(n.filename=t.filename),ye(t.pageId)&&(n.pageId=t.pageId),ye(t.rndPageId)?n.rndPageId=t.rndPageId:n.rndPageId=null,nt(n))}}function nt(e){if(!be(e)){var n=e.config;if(!be(n)){var i=null,a=e.pageId;ye(e.rndPageId)&&(a=e.rndPageId);var r=rt(a);i=be(r)?at(e.fileName):r.src;var o=t.getElement(n.imgId);o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),o.setAttribute("href",i)}}}function it(e){if(!be(e)){var n=e.config;if(!be(n)){var i=e.fileName,a=t.getElement(n.imgId);a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),a.setAttribute("href",i)}}}function at(t){return Ln.scoreDir+Ln.score.noSpaceTitle+Ae+t}function rt(t){var e=Ln.part.pages[t];return be(e)?null:e.img}function ot(t){var e=Ln.part.pages[t];ye(e)&&(e.isLoaded=!0),Ln.pageNoToLoad--,0===Ln.pageNoToLoad&&lt(),st(Ln.pageNoToLoad)}function st(t){if(t>0){var e=Ce+" "+t;R(Cn.errorRectStyle,Cn.errorBtnAttrib,Cn.errorTxtStyle,e)}else R(Cn.connectedRectStyle,Cn.connectedBtnAttrib,Cn.connectedTxtStyle,Le)}function lt(){Te("onPageLoadComplete: ");var t=Ln.part.pages,e=!0;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i.isLoaded||(Te("onPageLoadComplete: page: "+n+" is not loaded, retying load"),mt(i.no),e=!1)}e&&(Te("All Pages loaded: "),Ln.isReady=!0,ht())}function ct(e){if(ye(e.name)&&(Ln.part.name=e.name,n.setElementText(Cn.idInstrument,e.name)),ye(e.pageRanges)){var i=e.pageRanges;if(t.isArray(i))for(var a=0;a<i.length;a++)Pt(i[a]);else Pt(i)}ye(e.imgDir)&&(Ln.part.imgDir=e.imgDir),ye(e.imgPageNameToken)&&(Ln.part.imgPageNameToken=e.imgPageNameToken),ye(e.imgContPageName)&&(Ln.part.imgContPageName=e.imgContPageName),ye(e.contPageNo)&&(Ln.part.contPageNo=e.contPageNo),ft()}function ft(){var e=Ln.part,n=e.pageRanges;if(t.isArray(n)){for(var i=0;i<n.length;i++)pt(n[i]);dt(),ut()}}function dt(){var t=It();Ln.pageNoToLoad++,vt(t)}function ut(){var t=St();Ln.pageNoToLoad++,vt(t)}function pt(e){if(t.isObject(e)){var n=1,i=1;ye(e.start)&&(n=t.toInt(e.start)),ye(e.end)&&(i=t.toInt(e.end));var a=Ln.pageNoToLoad+(i-n+1);Ln.pageNoToLoad=a;for(var r=n;r<=i;r++)mt(r)}}function mt(t){var e=gt(t);vt(e)}function vt(t){if(!be(t)){var e=t.imgFileUrl;be(e)||t.loadImg(e,t.id)}}function gt(e){var n=yt(e),i=Ln.part.pages[n];if(ye(i))return i;var a=Ln.part.imgPageNameToken;a=be(a)?bt(e):t.replace(a,Cn.pageNoToken,""+e);var r=Ln.part.imgDir+a;i=new c(n,e,a,r);return Ln.part.pages[n]=i,i}function St(){var t=Ln.part.contPageNo,e=yt(t),n=Ln.part.pages[e];if(ye(n))return n;var i=Ln.part.imgContPageName,a=Ln.part.imgDir+i;n=new c(e,t,i,a);return Ln.part.pages[e]=n,n}function It(){var t=Ln.part.blankPageNo,e=yt(t),n=Ln.part.pages[e];if(ye(n))return n;var i=Cn.blankPageUrl,a=Cn.blankPageUrl;n=new c(e,t,i,a);return Ln.part.pages[e]=n,n}function bt(t){return Ln.score.noSpaceTitle+he+instrumentName+"_page"+t+".png"}function yt(t){return Cn.pageIdPrefix+t}function Pt(t){if(!(be(t)||be(t.start)||be(t.end))){var e=t.start,n=t.end,i={start:e,end:n};Ln.part.pageRanges=[],Ln.part.pageRanges.push(i)}}function Tt(e){var n=[];if(t.isArray(e))for(var i=0;i<e.length;i++){var a=e[i];t.arrContains(Cn.filterOutParts,a)||n.push(a)}else t.arrContains(Cn.filterOutParts,a)||n.push(e);t.arrEquals(Ln.score.parts,n)||(Ln.score.parts=n),kt(n)?Et(Ln.part.name):xt(n)}function kt(e){if(be(Ln.part.name)||!t.isArray(e))return!1;for(var n=Ln.part.name,i=0;i<e.length;i++)if(n===e[i])return!0;return!1}function xt(e){var n=t.getElement(Cn.idParts);if(!be(n)){t.removeElementChildren(n);for(var i=0;i<e.length;i++){var a=e[i];if(!t.arrContains(Cn.filterOutParts,a)){var r=new f(i+1,a),o=t.createDiv(),s=t.createButton(r);t.setText(s,a),t.addChildToParent(o,s),t.addChildToParent(n,o)}}t.makeVisible(Cn.idPartsListOuterDiv)}}function Et(t){var n=new p;n[mn]=t,e.sendEvent(fn,n)}function ht(){var t=new p;t[mn]=Ln.part.name,e.sendEvent(dn,t)}function At(t){var n=new p;n[vn]=t,e.sendEvent(un,n)}function Nt(t,n,i){var a=new p;a[yn]=t,a[Pn]=n,a[mn]=i,e.sendEvent(pn,a)}function Bt(e){var n=null,i=[],a={};if(t.isArray(e))for(var r=0;r<e.length;r++){var o=e[r];ye(o.type)&&(n=o.type),ye(o.targets)&&(i=o.targets),ye(o.params)&&(a=o.params),wt(n,i,a)}}function wt(e,n,i){if(t.logDebug("doAction: "+e),!be(e))switch(e){case"PING":ge(i);break;case"START":de(n);break;case"STOP":fe();break;case"SEMAPHORE_ON":ae(i);break;case"SEMAPHORE_OFF":re(i);break;case"ACTIVATE":ee(n,i);break;case"BEAT":Kt(n,i);break;case"START_MARK":Wt(n,i);break;case"INSTRUMENT_SLOTS":Ut(i);break;case"RESET_INSTRUMENT_SLOTS":_t();break;case"RESET_STAVES":Mt();break;case"OVERLAY_ELEMENT":Ct(n,i);break;default:Pe("doAction: Unknown actionType: "+e)}}function Ct(e,n){if(!be(n)&&!be(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Lt(e[i],n);else Lt(e,n)}function Lt(t,e){var n=Ln[t],i=e[Tn],a=e[kn],r=e[xn],o=e[En];Rt(n,i,a,r,o)}function Rt(t,e,n,i,a){if(!be(t)&&!be(e))switch(e){case"POSITION":Ot(t,n,i,a);break;case"PITCH":case"SPEED":case"PRESSURE":case"DYNAMICS":default:Te("setOverlayElement: unknown overlay type: "+e)}}function Ot(t,e,n,i){if(!be(e))switch(e){case"POSITION_BOX":Dt(t,n,i);break;case"POSITION_LINE":case"POSITION_BRIDGE_LINE":case"POSITION_ORD_LINE":default:Te("setOverlayElement: unknown overlay type: "+overlayType)}}function Dt(e,n,i){var a=e.config;if(!be(a)){var r=a.ovrlPosId;if(n){var o=t.toFloat(i);t.isNumeric(o)||(o=1),t.setElementIdStyleProperty(r,{opacity:o}),t.makeVisible(r)}else t.makeInVisible(r)}}function Mt(){Vt(Ln.topStave),Vt(Ln.bottomStave)}function Vt(t){be(t)||(t.pageId=An,t.rndPageId=null,t.filename=hn,t.beatMap=null,t.timeline=null,t.isActive=!0,t.isPlaying=!1,t.currentBeat=null,g(t),it(t))}function _t(){Ht(),Yt()}function Ut(t){if(!be(t)){var e=t[bn];Ft(e),zt()}}function zt(){t.makeVisible(Cn.idInstControls)}function Yt(){t.makeInVisible(Cn.idInstControls)}function Ft(e){if(!be(e)){var n=t.csvToArr(e);if(!(be(n)||n.length<=0)){var i=Ln.score.parts;if(!(be(i)||i.length<=0))for(var a=0;a<i.length;a++){var r=a+1;a<n.length?jt(n[a],r):Gt(r)}}}}function Ht(){var t=Ln.score.parts;if(!(be(t)||t.length<=0))for(var e=0;e<t.length;e++){var n=e+1;Qt(n)}}function jt(e,i){if(!be(e)&&!be(i)){var a=Cn.idInstSlotTxtPrefix+i,r=Cn.idInstSlotBtnPrefix+i,o=Cn.idInstSlotPrefix+i,s=e===Ln.part.name;t.makeVisible(a),t.makeVisible(r),t.makeVisible(o),t.setElementIdAttributes(o,Cn.instSlotActiveAttrib),n.setElementText(a,e.trim()),t.setElementIdStyleProperty(a,Cn.instSlotTxtActiveStyle),s?t.setElementIdStyleProperty(r,Cn.instSlotBtnActiveInstStyle):t.setElementIdStyleProperty(r,Cn.instSlotBtnActiveStyle);var l=new d(i,e);t.setElementIdAttributes(r,l)}}function Gt(e){var i=Cn.idInstSlotTxtPrefix+e,a=Cn.idInstSlotBtnPrefix+e,r=Cn.idInstSlotPrefix+e;t.makeVisible(i),t.makeVisible(a),t.makeVisible(r),t.setElementIdAttributes(r,Cn.instSlotInActiveAttrib),n.setElementText(i,Ee),t.setElementIdStyleProperty(i,Cn.instSlotTxtInActiveStyle),t.setElementIdStyleProperty(a,Cn.instSlotBtnInActiveStyle);var o=new u;t.setElementIdAttributes(a,o)}function Qt(e){var n=Cn.idInstSlotTxtPrefix+e,i=Cn.idInstSlotBtnPrefix+e,a=Cn.idInstSlotPrefix+e;t.makeInVisible(n),t.makeInVisible(i),t.makeInVisible(a);var r=new u;t.setElementIdAttributes(i,r)}function Wt(e,n){if(!be(n)&&!be(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Zt(e[i],n);else Zt(e,n)}function Zt(t,e){if(!be(e)){var i=Ln[t],a=e[In];if(!be(i)&&!be(a)){var r=i.beatMap;if(!be(r)){var o=r[a];if(!be(o)){var s=o.xStart-1,l=qt(i);n.setLineX(l,s,s),Jt(l,!0)}}}}}function qt(e){return t.getElement(e.config.startLineId)}function Jt(e,n){n?t.makeElementVisible(e):t.makeElementInVisible(e)}function Kt(e,n){if(!be(n)&&!be(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Xt(e[i],n);else Xt(e,n)}function Xt(t,e){var n=Ln[t],i=e[In];$t(n,i)}function $t(t,e){if(!be(t)&&!be(e)){var n=i.getCurrentTime();ke("setStaveBeat: stave: "+t.id+" beat: "+e+" time: "+n),te(t.timeline,e),t.currentBeat=e}}function te(t,e){if(!be(t)){var n=Cn.tweenIdPrefix+Cn.beatIdPrefix+e,i=t.labels;n in i?t.seek(n):ke("setTimelineBeat: Invalid beat "+n)}}function ee(e,n){if(!be(n)&&!be(e))if(t.isArray(e))for(var i=0;i<e.length;i++)ne(e[i],n);else ne(e,n)}function ne(t,e){var n=Ln[t],i=e[gn],a=e[Sn];ie(n,i,a)}function ie(e,n,i){if(!(be(e)||be(n)||be(i))){if(n)t.setElementIdStyleProperty(e.config.maskId,Cn.activeStaveStyle);else{t.setElementIdStyleProperty(e.config.maskId,Cn.inactiveStaveStyle);var a=qt(e);Jt(a,!1)}i&&pe(e.timeline)}}function ae(t){be(t)||se(t.lightNo,t.colourId)}function re(t){be(t)||le(t.lightNo,qe)}function oe(){le(4,qe),le(1,Ye)}function se(t,e){var n=ce(e);le(t,n)}function le(e,i){if(!be(e)&&!be(i))for(var a=t.toInt(e),r=1;r<=a;r++){var o=Cn.idSemaphorePrefix+r;n.setElementColour(o,i)}}function ce(t){var e;switch(t||(t=1),t){case 4:e=Ye;break;case 3:e=Fe;break;case 2:e=He;break;case 1:default:e=ze}return e}function fe(){me(),Ln.isPlaying=!1,oe(),v()}function de(e){if(t.isArray(e))for(var n=0;n<e.length;n++)ue(e[n]);else ue(e)}function ue(t){if(!be(t)){var e=Ln[t];if(!be(e)){var n=e.timeline;be(n)||(pe(n),Ln.isPlaying=!0)}}}function pe(t){if(be(t))Pe("startTimeline: invalid timeline");else{var e=t.progress();e>0&&e<1?t.resume():t.play(0)}}function me(){ve(Ln.topStave.timeline),ve(Ln.bottomStave.timeline),Ln.bottomStave.isPlaying=!1,Ln.topStave.isPlaying=!1}function ve(t){be(t)?Pe("stopTimeline: invalid timeline"):t.pause()}function ge(e){t.isObject(e)&&ye(e.sendTimeMs)&&At(e.sendTimeMs)}function Se(e,n){t.setElementStyleProperty(e,n)}function Ie(e,n){t.setElementAttributes(e,n)}function be(e){return t.isNull(e)}function ye(e){return t.isNotNull(e)}function Pe(e){t.logError(e)}function Te(e){t.log(e)}function ke(e){t.logDebug(e)}const xe="dev",Ee="",he="_",Ae="/",Ne="AV",Be="FullScore",we="Connected",Ce="Loading",Le="READY",Re="Reconnecting",Oe="Error",De="visible",Me="hidden",Ve="none",_e="<",Ue=">",ze="green",Ye="red",Fe="orange",He="yellow",je="white",Ge="black",Qe="blue",We="grey",Ze="lightgrey",qe=Ve,Je=qe,Ke=je,Xe=ze,$e=Ye,tn=Fe,en=Qe,nn=We,an=ze,rn=Ye,on=Fe,sn=je,ln=je,cn=Ge,fn="PART_REG",dn="PART_READY",un="PING",pn="SELECT_ISLOT",mn="part",vn="serverTime",gn="isActive",Sn="isPlay",In="beatNo",bn="csvInstruments",yn="slotNo",Pn="slotInstrument",Tn="overlayType",kn="overlayElement",xn="isEnabled",En="opacity",hn="img/blankStave.png",An="p0";var Nn=["/audio/violin-tuning.mp3"],Bn=null,wn=null,Cn={connectionPreference:"ws,sse,poll",defaultConnectionType:e.WEBSOCKET,appUrlHttp:"/htp",appUrlSse:"/sse",appUrlWebsockets:"/wsoc",pageNoToken:"@PgNo@",instToken:"@Inst@",slotNoToken:"@SlotNo@",pageIdPrefix:"p",tsBaseBeatDenom:8,tsY:0,beatIdPrefix:"b",tweenIdPrefix:"tw",beatTweenIdPrefix:"btw",ballTweenIdPrefix:"bltw",idTitle:"title",idServerStatusRect:"srvrStatusRect",idServerStatusTxt:"srvrStatusTxt",idServerStatusBtn:"srvrStatBtn",idParts:"parts",idPartsListOuterDiv:"partListOuterDiv",idInstrument:"part",idInstControls:"instControls",idInstSlotPrefix:"instSlot",idInstSlotTxtPrefix:"instSlotTxt",idInstSlotBtnPrefix:"instSlotRect",idTempoBpm:"tmpBpm",idSemaphorePrefix:"semC",blankPageUrl:"img/blankStave.png",filterOutParts:[Ne,Be],connectedRectStyle:{fill:Xe,stroke:an,"stroke-width":"0px",visibility:De,opacity:1},disconnectedRectStyle:{fill:$e,stroke:rn,"stroke-width":"1px",visibility:De,opacity:1},errorRectStyle:{fill:tn,stroke:on,"stroke-width":"1px",visibility:De,opacity:1},connectedTxtStyle:{fill:sn},disconnectedTxtStyle:{fill:ln},errorTxtStyle:{fill:cn},activeStaveStyle:{fill:Je,stroke:en,"stroke-width":"1px",visibility:De,opacity:.5},inactiveStaveStyle:{fill:Ke,stroke:nn,"stroke-width":"1px",visibility:De,opacity:.4},instSlotBtnActiveStyle:{fill:je,stroke:Ge,"stroke-width":"1px",visibility:De,opacity:1},instSlotBtnActiveInstStyle:{fill:"#d7f2cd",stroke:Ge,"stroke-width":"1px",visibility:De,opacity:1},instSlotBtnInActiveStyle:{fill:Ze,stroke:Ve,visibility:De,opacity:1},instSlotTxtActiveStyle:{fill:Ge,visibility:De,opacity:1},instSlotTxtInActiveStyle:{fill:Ge,stroke:Ve,visibility:Me,opacity:0},instSlotActiveAttrib:{filter:"url(#dropshadow)"},instSlotInActiveAttrib:{filter:"none"},connectedBtnAttrib:{filter:""},disconnectedBtnAttrib:{filter:"url(#dropshadow)"},errorBtnAttrib:{filter:"url(#dropshadow)"},topStave:{gId:"stvTop",imgId:"stvTopImg",startLineId:"stvTopStartLine",positionLineId:"stvTopPosLine",beatBallId:"stvTopBeatBall",maskId:"stvTopMask",ovrlPosId:"ovrlTopPos",ballYmax:84,xLeftMargin:31.5,posLineConf:{x1:"95",y1:"80",x2:"95",y2:"281"},posBallConf:{cx:"95",cy:"110",r:"4"}},bottomStave:{gId:"stvBot",imgId:"stvBotImg",startLineId:"stvBotStartLine",positionLineId:"stvBotPosLine",beatBallId:"stvBotBeatBall",maskId:"stvBotMask",ovrlPosId:"ovrlBotPos",ballYmax:305,xLeftMargin:31.5,posLineConf:{x1:"95",y1:"301",x2:"95",y2:"502"},posBallConf:{cx:"95",cy:"331",r:"4"}}},Ln={isPlaying:!1,isReady:!1,score:{title:"ZScore",noSpaceTitle:"ZScore",instrument:"Part View",parts:["Part View"],firstPageNo:1,lastPageNo:2},part:{name:"Part View",imgDir:null,imgPageNameToken:null,imgContPageName:null,blankPageNo:0,contPageNo:6666,pageRanges:[{start:1,end:1}],pages:{}},topStave:{id:"topStave",config:Cn.topStave,pageId:An,rndPageId:null,filename:hn,beatMap:null,timeline:null,isActive:!0,isPlaying:!1,currentBeat:null},bottomStave:{id:"bottomStave",config:Cn.bottomStave,pageId:An,rndPageId:null,filename:hn,beatMap:null,timeline:null,isActive:!1,isPlaying:!1,currentBeat:null},startTimeTl:0,currentBeatId:"b0",currentBeatNo:0,tempo:0,tempoModifier:1,scoreDir:"/score/",currentTickTimeSec:0,nextBeatTickTimeSec:0,audioTlBeatTime:0,audioTickBeatTime:0,isConnected:!1,isInitialised:!1,connectionType:null,pageNoToLoad:0};return c.prototype.loadImg=function(t){this.img.src=t,this.img.onload=function(){Te("pageImgOnLoad: id: "+this.pageId),ot(this.pageId)}},{onStateBtn:function(){S()},onPartSelect:function(t){I(t)},onInstrumentSelect:function(t,e){b(t,e)}}}(zsUtil,zsNet,zsSvg,zsAudio,zsMusic,window,document);