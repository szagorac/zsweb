var zscore=function(t,e,n,i,a,r,o){"use strict";function s(t){this.message=t,this.name="ZScoreException"}function l(t,e,n,i,a,r,o,s){this.xStart=t,this.xEnd=e,this.yStart=n,this.yEnd=i,this.beatStartNum=a,this.beatStartDenom=r,this.beatEndNum=o,this.beatEndDenom=s}function c(t,e,n,i){this.id=t,this.no=e,this.imgFileName=n,this.imgFileUrl=i,this.isLoaded=!1,this.img=new Image,this.img.pageId=t}function f(t,e){this.id="partBtn"+t,this.class="partListButton",this.onclick="onPartSelect('"+e+"')"}function d(t,e){this.onclick="onInstrumentSelect("+t+",'"+e+"')"}function u(){this.onclick=""}function p(){}function v(){if(!Vn.isInitialised){if(!(t&&e&&n&&i&&a))throw new s("Invalid libraries. Required: zsUtil, zsNet, zsSvg, zsAudio and zsMusic");t.setRunMode(Ne),he("init: "),On=t.isTouchDevice(),Dn=t.isSafari(navigator),he("init: IsTouch Device: "+On+" isSafari: "+Dn),Vn.fontCanvas=o.createElement("canvas"),Vn.canvasCtx=Vn.fontCanvas.getContext("2d"),t.listen("resize",r,x),t.listen("orientationchange",r,x),P(),k(),T(),Vn.isInitialised=!0}}function m(){g(Vn.topStave),g(Vn.bottomStave)}function g(e){if(!Ee(e)&&!Ee(e.config)){var n=e.config;t.setElementIdAttributes(n.positionLineId,n.posLineConf),t.setElementIdAttributes(n.beatBallId,n.posBallConf)}}function S(){Vn.isInitialised?(he("onStateBtnClick: zscore initialised"),e.isConnected()||(he("onStateBtnClick: zscore not connected, reconnecting..."),O())):(he("onStateBtnClick: initialising"),v())}function I(e){t.arrContains(Vn.score.parts,e)?(Vn.part.name=e,xt(e),t.makeInVisible(Mn.idPartsListOuterDiv)):he("onPartSelection: unexpected part: "+e)}function b(t,e){Ee(t)||Ee(e)||Ee(Vn.part.name)||Nt(t,e,Vn.part.name)}function y(){E()}function P(){e.init(Mn.connectionPreference,Mn.appUrlSse,Mn.appUrlWebsockets,Mn.appUrlHttp,D,h)}function T(){Ee(i)?xe("initAudio: invalid zsAudio lib"):i.init(Rn,0)}function E(){Ee(i)?xe("resetAudio: invalid zsAudio lib"):i.reset()}function k(){n.init()}function x(e){if(!t.isObject(this))return null}function h(t,n){switch(t){case e.OPEN:A(n);break;case e.CLOSED:N(n);break;case e.ERROR:B(n);break;default:xe("Unknown Connection Event State: "+t+" for type: "+n)}}function A(t){he(t+" connection opened."),w(t)}function N(t){he(t+" connection closed."),C(t)}function B(t){he(t+" connection error."),L(t)}function w(t){Vn.isConnected=!0,Vn.connectionType=t,Vn.reconnectAttmpts=0,R(Mn.connectedRectStyle,Mn.connectedBtnAttrib,Mn.connectedTxtStyle,Oe)}function C(t){Vn.isConnected=!1,R(Mn.disconnectedRectStyle,Mn.disconnectedBtnAttrib,Mn.disconnectedTxtStyle,Ve),O(t)}function L(t){Vn.isConnected=!1,R(Mn.errorRectStyle,Mn.errorBtnAttrib,Mn.errorTxtStyle,_e),O(t)}function R(e,n,i,a){var r=t.getElement(Mn.idServerStatusRect);Ee(r)||Pe(r,e);var o=t.getElement(Mn.idServerStatusBtn);Ee(o)||Te(o,n);var s=t.getElement(Mn.idServerStatusTxt);Ee(s)||(Pe(s,i),s.textContent=a)}function O(t){e.reconnect(t,!0)}function D(t,e){Vn.isConnected||w(),Ee(t)||(e||y(),ke(t.scoreInfo)&&M(t.scoreInfo),ke(t.partInfo)&&ct(t.partInfo),ke(t.pageInfo)&&et(t.pageInfo),ke(t.mapInfo)&&Y(t.mapInfo),ke(t.bpm)&&0!=t.bpm&&z(t.bpm),ke(t.actions)&&Bt(t.actions))}function M(e){t.isObject(e)&&(ke(e.title)&&V(e.title),ke(e.instruments)&&Tt(e.instruments),ke(e.bpm)&&U(e.bpm),ke(e.scoreDir)&&_(e.scoreDir))}function V(e){Vn.score.title!==e&&(Vn.score.title=e,Vn.score.noSpaceTitle=t.replaceEmptySpaces(e,we),n.setElementText(Mn.idTitle,e))}function _(t){Vn.scoreDir!==t&&(Vn.scoreDir=t)}function U(t){Vn.tempo!==t&&(Vn.tempo=t,n.setElementText(Mn.idTempoBpm,t))}function z(e){var n=t.toInt(e);if(!Ee(n)){var i=Vn.tempo,a=n/i;Vn.tempoModifier=a,U(n),Vn.isPlaying?H(a):G()}}function Y(e){if(!Ee(e.map)&&!Ee(e.pageId)){e.pageId;var n=e.staveId,i=e.map,a=Vn[n];if(!Ee(a)){var r=a.config.xLeftMargin,o=JSON.parse(JSON.stringify(i));if(t.isArray(o)){for(var s={},l=0;l<o.length;l++)F(s,o[l],r);a.beatMap=s,Q(n)}}}}function F(t,e,n){if(!(Ee(t)||Ee(e)||Ee(e.beatStartNum))){var i=e.beatStartNum,a=e.xStart+n,r=e.xEnd+n,o=new l(a,r,e.yStart,e.yEnd,i,e.beatStartDenom,e.beatEndNum,e.beatEndDenom);t[i]=o}}function H(t){j(Vn.topStave.timeline,t),j(Vn.bottomStave.timeline,t)}function j(t,e){if(!Ee(t)){var n=t.timeScale(),i=n*e;t.timeScale(i)}}function G(){W(Vn.topStave),W(Vn.bottomStave)}function Q(t){Ee(t)||W(Vn[t])}function W(t){if(!Ee(t)){var e=gsap.timeline({onComplete:K,onCompleteParams:[t.id],paused:!0}),n=t.beatMap;if(!Ee(n)){var i=t.config.positionLineId,r=t.config.beatBallId,o=t.config.ballYmax,s=!0;for(var l in n){var c=n[l],f=Vn.tempo,d=a.getBeatDurationSec(f),u=c.beatStartNum;if(s){var p=Mn.beatIdPrefix+(u-1),v=c.xStart,m=Z(i,0,v,p,0);e.add(m,Fe);var g=q(r,0,v,p);e.add(g,He),s=!1}v=c.xEnd,p=Mn.beatIdPrefix+u;var S=Mn.tweenIdPrefix+p,I=Z(i,d,v,p,u),b=q(r,d,v,p),y=J(r,d/2,o,p);S=I.vars.id;e.addLabel(S,He),e.add(I,He),e.add(b,Fe),e.add(y,S)}ke(t.currentBeat)&&ae(e,t.currentBeat),t.timeline=e}}}function Z(e,n,i,a,r){var o=Mn.tweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:o,duration:n,attr:{x1:i,x2:i},ease:"none",onStart:X,onStartParams:[a,r],onComplete:$,onCompleteParams:[a,r]})}function q(e,n,i,a){var r=Mn.ballTweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:r,duration:n,attr:{cx:i},ease:"none"})}function J(e,n,i,a){var r=Mn.ballTweenIdPrefix+a;return gsap.to(t.toCssIdQuery(e),{id:r,duration:n,attr:{cy:i,r:2},ease:"power1.out",autoAlpha:.5,repeat:1,yoyo:!0})}function K(t){Ae("onTimelineComplete stave: "+t);var e=Vn[t];ke(e)&&(e.isRunning=!1),ke(e.timeline)&&e.timeline.pause(0)}function X(t,e){var n=i.getCurrentTime();Vn.audioTlBeatTime=n,Ae("onBeatStart: beat: "+t+" beatNo: "+e+" beatTime: "+n),tt(e,t)}function $(t,e){var n=i.getCurrentTime(),a=n-Vn.startTimeTl;Ae("onBeatEnd: beat: "+t+" beatNo: "+e+" elapsedTime: "+a)}function tt(e,n){t.isNumeric(e)&&(t.isNull(n)&&(n=Mn.beatIdPrefix+e),Vn.currentBeatId=n,Vn.currentBeatNo=e)}function et(t){if(!Ee(t.staveId)){var e=t.staveId,n=Vn[e];Ee(n)?xe("processPageinfo: Invalid stave for id: {}",e):(ke(t.filename)&&(n.filename=t.filename),ke(t.pageId)&&(n.pageId=t.pageId),ke(t.rndPageId)?n.rndPageId=t.rndPageId:n.rndPageId=null,nt(n))}}function nt(e){if(!Ee(e)){var n=e.config;if(!Ee(n)){var i=null,a=e.pageId;ke(e.rndPageId)&&(a=e.rndPageId);var r=rt(a);i=Ee(r)?at(e.fileName):r.src;var o=t.getElement(n.imgId);o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),o.setAttribute("href",i)}}}function it(e){if(!Ee(e)){var n=e.config;if(!Ee(n)){var i=e.fileName,a=t.getElement(n.imgId);a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),a.setAttribute("href",i)}}}function at(t){return Vn.scoreDir+Vn.score.noSpaceTitle+Ce+t}function rt(t){var e=Vn.part.pages[t];return Ee(e)?null:e.img}function ot(t){var e=Vn.part.pages[t];ke(e)&&(e.isLoaded=!0),Vn.pageNoToLoad--,0===Vn.pageNoToLoad&&lt(),st(Vn.pageNoToLoad)}function st(t){if(t>0){var e=De+" "+t;R(Mn.errorRectStyle,Mn.errorBtnAttrib,Mn.errorTxtStyle,e)}else R(Mn.connectedRectStyle,Mn.connectedBtnAttrib,Mn.connectedTxtStyle,Me)}function lt(){he("onPageLoadComplete: ");var t=Vn.part.pages,e=!0;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i.isLoaded||(he("onPageLoadComplete: page: "+n+" is not loaded, retying load"),vt(i.no),e=!1)}e&&(he("All Pages loaded: "),Vn.isReady=!0,ht())}function ct(e){if(ke(e.name)&&(Vn.part.name=e.name,n.setElementText(Mn.idInstrument,e.name)),ke(e.pageRanges)){var i=e.pageRanges;if(t.isArray(i))for(var a=0;a<i.length;a++)Pt(i[a]);else Pt(i)}ke(e.imgDir)&&(Vn.part.imgDir=e.imgDir),ke(e.imgPageNameToken)&&(Vn.part.imgPageNameToken=e.imgPageNameToken),ke(e.imgContPageName)&&(Vn.part.imgContPageName=e.imgContPageName),ke(e.contPageNo)&&(Vn.part.contPageNo=e.contPageNo),ft()}function ft(){var e=Vn.part,n=e.pageRanges;if(t.isArray(n)){for(var i=0;i<n.length;i++)pt(n[i]);dt(),ut()}}function dt(){var t=It();Vn.pageNoToLoad++,mt(t)}function ut(){var t=St();Vn.pageNoToLoad++,mt(t)}function pt(e){if(t.isObject(e)){var n=1,i=1;ke(e.start)&&(n=t.toInt(e.start)),ke(e.end)&&(i=t.toInt(e.end));var a=Vn.pageNoToLoad+(i-n+1);Vn.pageNoToLoad=a;for(var r=n;r<=i;r++)vt(r)}}function vt(t){var e=gt(t);mt(e)}function mt(t){if(!Ee(t)){var e=t.imgFileUrl;Ee(e)||t.loadImg(e,t.id)}}function gt(e){var n=yt(e),i=Vn.part.pages[n];if(ke(i))return i;var a=Vn.part.imgPageNameToken;a=Ee(a)?bt(e):t.replace(a,Mn.pageNoToken,""+e);var r=Vn.part.imgDir+a;i=new c(n,e,a,r);return Vn.part.pages[n]=i,i}function St(){var t=Vn.part.contPageNo,e=yt(t),n=Vn.part.pages[e];if(ke(n))return n;var i=Vn.part.imgContPageName,a=Vn.part.imgDir+i;n=new c(e,t,i,a);return Vn.part.pages[e]=n,n}function It(){var t=Vn.part.blankPageNo,e=yt(t),n=Vn.part.pages[e];if(ke(n))return n;var i=Mn.blankPageUrl,a=Mn.blankPageUrl;n=new c(e,t,i,a);return Vn.part.pages[e]=n,n}function bt(t){return Vn.score.noSpaceTitle+we+instrumentName+"_page"+t+".png"}function yt(t){return Mn.pageIdPrefix+t}function Pt(t){if(!(Ee(t)||Ee(t.start)||Ee(t.end))){var e=t.start,n=t.end,i={start:e,end:n};Vn.part.pageRanges=[],Vn.part.pageRanges.push(i)}}function Tt(e){var n=[];if(t.isArray(e))for(var i=0;i<e.length;i++){var a=e[i];t.arrContains(Mn.filterOutParts,a)||n.push(a)}else t.arrContains(Mn.filterOutParts,a)||n.push(e);t.arrEquals(Vn.score.parts,n)||(Vn.score.parts=n),Et(n)?xt(Vn.part.name):kt(n)}function Et(e){if(Ee(Vn.part.name)||!t.isArray(e))return!1;for(var n=Vn.part.name,i=0;i<e.length;i++)if(n===e[i])return!0;return!1}function kt(e){var n=t.getElement(Mn.idParts);if(!Ee(n)){t.removeElementChildren(n);for(var i=0;i<e.length;i++){var a=e[i];if(!t.arrContains(Mn.filterOutParts,a)){var r=new f(i+1,a),o=t.createDiv(),s=t.createButton(r);t.setText(s,a),t.addChildToParent(o,s),t.addChildToParent(n,o)}}t.makeVisible(Mn.idPartsListOuterDiv)}}function xt(t){var n=new p;n[In]=t,e.sendEvent(vn,n)}function ht(){var t=new p;t[In]=Vn.part.name,e.sendEvent(mn,t)}function At(t){var n=new p;n[bn]=t,e.sendEvent(gn,n)}function Nt(t,n,i){var a=new p;a[kn]=t,a[xn]=n,a[In]=i,e.sendEvent(Sn,a)}function Bt(e){var n=null,i=[],a={};if(t.isArray(e))for(var r=0;r<e.length;r++){var o=e[r];ke(o.type)&&(n=o.type),ke(o.targets)&&(i=o.targets),ke(o.params)&&(a=o.params),wt(n,i,a)}}function wt(e,n,i){if(t.logDebug("doAction: "+e),!Ee(e))switch(e){case"PING":ye(i);break;case"START":me(n);break;case"STOP":ve();break;case"SEMAPHORE_ON":le(i);break;case"SEMAPHORE_OFF":ce(i);break;case"ACTIVATE":re(n,i);break;case"BEAT":ee(n,i);break;case"START_MARK":Kt(n,i);break;case"INSTRUMENT_SLOTS":Ht(i);break;case"RESET_INSTRUMENT_SLOTS":Ft();break;case"RESET_STAVES":zt();break;case"OVERLAY_ELEMENT":Dt(n,i);break;case"OVERLAY_LINE":Ct(n,i);break;default:xe("doAction: Unknown actionType: "+e)}}function Ct(e,n){if(!Ee(n)&&!Ee(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Lt(e[i],n);else Lt(e,n)}function Lt(t,e){var n=Vn[t],i=e[hn],a=e[Nn];Rt(n,i,a)}function Rt(t,e,n){if(!(Ee(t)||Ee(e)||Ee(n)))switch(e){case"POSITION":Ot(t.config.ovrlPosId+Mn.idLineSuffix,n);break;case"PITCH":case"SPEED":case"PRESSURE":case"DYNAMICS":default:he("setOverlayElement: unknown overlay type: "+e)}}function Ot(e,i){var a=t.getElement(e);n.setLineY(a,i,i)}function Dt(e,n){if(!Ee(n)&&!Ee(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Mt(e[i],n);else Mt(e,n)}function Mt(t,e){var n=Vn[t],i=e[hn],a=e[An],r=e[Bn],o=e[wn];Vt(n,i,a,r,o)}function Vt(t,e,n,i,a){if(!Ee(t)&&!Ee(e))switch(e){case"POSITION":_t(t,n,i,a);break;case"PITCH":case"SPEED":case"PRESSURE":case"DYNAMICS":default:he("setOverlayElement: unknown overlay type: "+e)}}function _t(t,e,n,i){if(!Ee(e))switch(e){case"POSITION_BOX":Ut(t,n,i);break;case"POSITION_LINE":case"POSITION_BRIDGE_LINE":case"POSITION_ORD_LINE":default:he("setOverlayElement: unknown overlay type: "+e)}}function Ut(e,n,i){var a=e.config;if(!Ee(a)){var r=a.ovrlPosId;if(n){var o=t.toFloat(i);t.isNumeric(o)||(o=1),t.setElementIdStyleProperty(r,{opacity:o}),t.makeVisible(r)}else t.makeInVisible(r)}}function zt(){Yt(Vn.topStave),Yt(Vn.bottomStave)}function Yt(t){Ee(t)||(t.pageId=Ln,t.rndPageId=null,t.filename=Cn,t.beatMap=null,t.timeline=null,t.isActive=!0,t.isPlaying=!1,t.currentBeat=null,g(t),it(t))}function Ft(){Wt(),Gt()}function Ht(t){if(!Ee(t)){var e=t[En];Qt(e),jt()}}function jt(){t.makeVisible(Mn.idInstControls)}function Gt(){t.makeInVisible(Mn.idInstControls)}function Qt(e){if(!Ee(e)){var n=t.csvToArr(e);if(!(Ee(n)||n.length<=0)){var i=Vn.score.parts;if(!(Ee(i)||i.length<=0))for(var a=0;a<i.length;a++){var r=a+1;a<n.length?Zt(n[a],r):qt(r)}}}}function Wt(){var t=Vn.score.parts;if(!(Ee(t)||t.length<=0))for(var e=0;e<t.length;e++){var n=e+1;Jt(n)}}function Zt(e,i){if(!Ee(e)&&!Ee(i)){var a=Mn.idInstSlotTxtPrefix+i,r=Mn.idInstSlotBtnPrefix+i,o=Mn.idInstSlotPrefix+i,s=e===Vn.part.name;t.makeVisible(a),t.makeVisible(r),t.makeVisible(o),t.setElementIdAttributes(o,Mn.instSlotActiveAttrib),n.setElementText(a,e.trim()),t.setElementIdStyleProperty(a,Mn.instSlotTxtActiveStyle),s?t.setElementIdStyleProperty(r,Mn.instSlotBtnActiveInstStyle):t.setElementIdStyleProperty(r,Mn.instSlotBtnActiveStyle);var l=new d(i,e);t.setElementIdAttributes(r,l)}}function qt(e){var i=Mn.idInstSlotTxtPrefix+e,a=Mn.idInstSlotBtnPrefix+e,r=Mn.idInstSlotPrefix+e;t.makeVisible(i),t.makeVisible(a),t.makeVisible(r),t.setElementIdAttributes(r,Mn.instSlotInActiveAttrib),n.setElementText(i,Be),t.setElementIdStyleProperty(i,Mn.instSlotTxtInActiveStyle),t.setElementIdStyleProperty(a,Mn.instSlotBtnInActiveStyle);var o=new u;t.setElementIdAttributes(a,o)}function Jt(e){var n=Mn.idInstSlotTxtPrefix+e,i=Mn.idInstSlotBtnPrefix+e,a=Mn.idInstSlotPrefix+e;t.makeInVisible(n),t.makeInVisible(i),t.makeInVisible(a);var r=new u;t.setElementIdAttributes(i,r)}function Kt(e,n){if(!Ee(n)&&!Ee(e))if(t.isArray(e))for(var i=0;i<e.length;i++)Xt(e[i],n);else Xt(e,n)}function Xt(t,e){if(!Ee(e)){var i=Vn[t],a=e[Tn];if(!Ee(i)&&!Ee(a)){var r=i.beatMap;if(!Ee(r)){var o=r[a];if(!Ee(o)){var s=o.xStart-1,l=$t(i);n.setLineX(l,s,s),te(l,!0)}}}}}function $t(e){return t.getElement(e.config.startLineId)}function te(e,n){n?t.makeElementVisible(e):t.makeElementInVisible(e)}function ee(e,n){if(!Ee(n)&&!Ee(e))if(t.isArray(e))for(var i=0;i<e.length;i++)ne(e[i],n);else ne(e,n)}function ne(t,e){var n=Vn[t],i=e[Tn];ie(n,i)}function ie(t,e){if(!Ee(t)&&!Ee(e)){var n=i.getCurrentTime();Ae("setStaveBeat: stave: "+t.id+" beat: "+e+" time: "+n),ae(t.timeline,e),t.currentBeat=e}}function ae(t,e){if(!Ee(t)){var n=Mn.tweenIdPrefix+Mn.beatIdPrefix+e,i=t.labels;n in i?t.seek(n):Ae("setTimelineBeat: Invalid beat "+n)}}function re(e,n){if(!Ee(n)&&!Ee(e))if(t.isArray(e))for(var i=0;i<e.length;i++)oe(e[i],n);else oe(e,n)}function oe(t,e){var n=Vn[t],i=e[yn],a=e[Pn];se(n,i,a)}function se(e,n,i){if(!(Ee(e)||Ee(n)||Ee(i))){if(n)t.setElementIdStyleProperty(e.config.maskId,Mn.activeStaveStyle);else{t.setElementIdStyleProperty(e.config.maskId,Mn.inactiveStaveStyle);var a=$t(e);te(a,!1)}i&&Se(e.timeline)}}function le(t){Ee(t)||de(t.lightNo,t.colourId)}function ce(t){Ee(t)||ue(t.lightNo,$e)}function fe(){ue(4,$e),ue(1,Ge)}function de(t,e){var n=pe(e);ue(t,n)}function ue(e,i){if(!Ee(e)&&!Ee(i))for(var a=t.toInt(e),r=1;r<=a;r++){var o=Mn.idSemaphorePrefix+r;n.setElementColour(o,i)}}function pe(t){var e;switch(t||(t=1),t){case 4:e=Ge;break;case 3:e=Qe;break;case 2:e=We;break;case 1:default:e=je}return e}function ve(){Ie(),Vn.isPlaying=!1,fe(),m()}function me(e){if(t.isArray(e))for(var n=0;n<e.length;n++)ge(e[n]);else ge(e)}function ge(t){if(!Ee(t)){var e=Vn[t];if(!Ee(e)){var n=e.timeline;Ee(n)||(Se(n),Vn.isPlaying=!0)}}}function Se(t){if(Ee(t))xe("startTimeline: invalid timeline");else{var e=t.progress();e>0&&e<1?t.resume():t.play(0)}}function Ie(){be(Vn.topStave.timeline),be(Vn.bottomStave.timeline),Vn.bottomStave.isPlaying=!1,Vn.topStave.isPlaying=!1}function be(t){Ee(t)?xe("stopTimeline: invalid timeline"):t.pause()}function ye(e){t.isObject(e)&&ke(e.sendTimeMs)&&At(e.sendTimeMs)}function Pe(e,n){t.setElementStyleProperty(e,n)}function Te(e,n){t.setElementAttributes(e,n)}function Ee(e){return t.isNull(e)}function ke(e){return t.isNotNull(e)}function xe(e){t.logError(e)}function he(e){t.log(e)}function Ae(e){t.logDebug(e)}const Ne="dev",Be="",we="_",Ce="/",Le="AV",Re="FullScore",Oe="Connected",De="Loading",Me="READY",Ve="Reconnecting",_e="Error",Ue="visible",ze="hidden",Ye="none",Fe="<",He=">",je="green",Ge="red",Qe="orange",We="yellow",Ze="white",qe="black",Je="blue",Ke="grey",Xe="lightgrey",$e=Ye,tn=$e,en=Ze,nn=je,an=Ge,rn=Qe,on=Je,sn=Ke,ln=je,cn=Ge,fn=Qe,dn=Ze,un=Ze,pn=qe,vn="PART_REG",mn="PART_READY",gn="PING",Sn="SELECT_ISLOT",In="part",bn="serverTime",yn="isActive",Pn="isPlay",Tn="beatNo",En="csvInstruments",kn="slotNo",xn="slotInstrument",hn="overlayType",An="overlayElement",Nn="overlayLineY",Bn="isEnabled",wn="opacity",Cn="img/blankStave.png",Ln="p0";var Rn=["/audio/violin-tuning.mp3"],On=null,Dn=null,Mn={connectionPreference:"ws,sse,poll",defaultConnectionType:e.WEBSOCKET,appUrlHttp:"/htp",appUrlSse:"/sse",appUrlWebsockets:"/wsoc",pageNoToken:"@PgNo@",instToken:"@Inst@",slotNoToken:"@SlotNo@",pageIdPrefix:"p",tsBaseBeatDenom:8,tsY:0,beatIdPrefix:"b",tweenIdPrefix:"tw",beatTweenIdPrefix:"btw",ballTweenIdPrefix:"bltw",idTitle:"title",idServerStatusRect:"srvrStatusRect",idServerStatusTxt:"srvrStatusTxt",idServerStatusBtn:"srvrStatBtn",idParts:"parts",idPartsListOuterDiv:"partListOuterDiv",idInstrument:"part",idInstControls:"instControls",idInstSlotPrefix:"instSlot",idInstSlotTxtPrefix:"instSlotTxt",idInstSlotBtnPrefix:"instSlotRect",idTempoBpm:"tmpBpm",idSemaphorePrefix:"semC",idLineSuffix:"Line",blankPageUrl:"img/blankStave.png",filterOutParts:[Le,Re],connectedRectStyle:{fill:nn,stroke:ln,"stroke-width":"0px",visibility:Ue,opacity:1},disconnectedRectStyle:{fill:an,stroke:cn,"stroke-width":"1px",visibility:Ue,opacity:1},errorRectStyle:{fill:rn,stroke:fn,"stroke-width":"1px",visibility:Ue,opacity:1},connectedTxtStyle:{fill:dn},disconnectedTxtStyle:{fill:un},errorTxtStyle:{fill:pn},activeStaveStyle:{fill:tn,stroke:on,"stroke-width":"1px",visibility:Ue,opacity:.5},inactiveStaveStyle:{fill:en,stroke:sn,"stroke-width":"1px",visibility:Ue,opacity:.4},instSlotBtnActiveStyle:{fill:Ze,stroke:qe,"stroke-width":"1px",visibility:Ue,opacity:1},instSlotBtnActiveInstStyle:{fill:"#d7f2cd",stroke:qe,"stroke-width":"1px",visibility:Ue,opacity:1},instSlotBtnInActiveStyle:{fill:Xe,stroke:Ye,visibility:Ue,opacity:1},instSlotTxtActiveStyle:{fill:qe,visibility:Ue,opacity:1},instSlotTxtInActiveStyle:{fill:qe,stroke:Ye,visibility:ze,opacity:0},instSlotActiveAttrib:{filter:"url(#dropshadow)"},instSlotInActiveAttrib:{filter:"none"},connectedBtnAttrib:{filter:""},disconnectedBtnAttrib:{filter:"url(#dropshadow)"},errorBtnAttrib:{filter:"url(#dropshadow)"},topStave:{gId:"stvTop",imgId:"stvTopImg",startLineId:"stvTopStartLine",positionLineId:"stvTopPosLine",beatBallId:"stvTopBeatBall",maskId:"stvTopMask",ovrlPosId:"ovrlTopPos",ballYmax:84,xLeftMargin:31.5,posLineConf:{x1:"95",y1:"80",x2:"95",y2:"281"},posBallConf:{cx:"95",cy:"110",r:"4"}},bottomStave:{gId:"stvBot",imgId:"stvBotImg",startLineId:"stvBotStartLine",positionLineId:"stvBotPosLine",beatBallId:"stvBotBeatBall",maskId:"stvBotMask",ovrlPosId:"ovrlBotPos",ballYmax:305,xLeftMargin:31.5,posLineConf:{x1:"95",y1:"301",x2:"95",y2:"502"},posBallConf:{cx:"95",cy:"331",r:"4"}}},Vn={isPlaying:!1,isReady:!1,score:{title:"ZScore",noSpaceTitle:"ZScore",instrument:"Part View",parts:["Part View"],firstPageNo:1,lastPageNo:2},part:{name:"Part View",imgDir:null,imgPageNameToken:null,imgContPageName:null,blankPageNo:0,contPageNo:6666,pageRanges:[{start:1,end:1}],pages:{}},topStave:{id:"topStave",config:Mn.topStave,pageId:Ln,rndPageId:null,filename:Cn,beatMap:null,timeline:null,isActive:!0,isPlaying:!1,currentBeat:null},bottomStave:{id:"bottomStave",config:Mn.bottomStave,pageId:Ln,rndPageId:null,filename:Cn,beatMap:null,timeline:null,isActive:!1,isPlaying:!1,currentBeat:null},startTimeTl:0,currentBeatId:"b0",currentBeatNo:0,tempo:0,tempoModifier:1,scoreDir:"/score/",currentTickTimeSec:0,nextBeatTickTimeSec:0,audioTlBeatTime:0,audioTickBeatTime:0,isConnected:!1,isInitialised:!1,connectionType:null,pageNoToLoad:0};return c.prototype.loadImg=function(t){this.img.src=t,this.img.onload=function(){he("pageImgOnLoad: id: "+this.pageId),ot(this.pageId)}},{onStateBtn:function(){S()},onPartSelect:function(t){I(t)},onInstrumentSelect:function(t,e){b(t,e)}}}(zsUtil,zsNet,zsSvg,zsAudio,zsMusic,window,document);