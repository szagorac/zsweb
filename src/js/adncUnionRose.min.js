var zscore=function(e,i,t,n,l,r){"use strict";function a(e){this.message=e,this.name="ZScoreException"}function s(e,i,t){this.value=e,this.isVisible=i,this.sizeMultiplier=t}function o(e,i,t,n,l,r,a,s,o,c,u,d){this.id=e,this.isSelected=i,this.isActive=t,this.isVisible=n,this.isPlaying=l,this.isPlayingNext=r,this.isPlayed=a,this.clickCount=s,this.arc=o,this.txt=u,this.modFill=c,this.playLine=d,this.playLineTl=null,this.tweens=[]}function c(e){this.id=e,this.tweens=[],this.selectedId=null}function u(){zt("onLoad: "),d()}function d(){if(!(e&&i&&t&&n))throw new a("Invalid libraries. Required: zsUtil, zsNet, zsSvg and zsAudio");e.setRunMode(Ft),zt("init: "),Sn=e.isTouchDevice(),bn=e.isSafari(navigator),zt("init: IsTouch Device: "+Sn+" isSafari: "+bn),Tn.fontCanvas=r.createElement("canvas"),Tn.canvasCtx=Tn.fontCanvas.getContext("2d"),v(),m(),h(),g(),C(),M(),w(),V(),z(),p()}function f(){x(),P(),I(),y()}function v(){i.init(In.connectionPreference,In.appUrlSse,In.appUrlWebsockets,In.appUrlHttp,ct)}function p(){i.getServerState()}function h(){kt(n)?Vt("initAudio: invalid zsAudio lib"):n.init(xn,5)}function y(){kt(n)?Vt("resetAudio: invalid zsAudio lib"):n.reset()}function m(){t.init()}function g(){var i=!1,t=!1,n=!0,l=!1,r=!1,a=!1,u=0,d=new s(Lt,!1,1),f=new o(null,i,t,n,l,r,a,u,null,null,d,null);Tn.tiles=e.init2DArray(8,8,f);var v=new c(null);Tn.tileCircles=e.initArray(8,v)}function x(){for(var e=0;e<Tn.tiles.length;e++)for(var i=Tn.tiles[e],t=0;t<i.length;t++)S(Tn.tiles[e][t])}function S(i){b(i.id),i.isSelected=!1,i.isActive=!1,i.isVisible=!0,i.isPlaying=!1,i.isPlayingNext=!1,i.isPlayed=!1,i.clickCount=0,i.txt.value=Lt,i.txt.isVisible=!1,i.modFill=null;for(var t=0;t<i.tweens.length;t++){var n=i.tweens[t];kt(n)||n.pause(0)}var l=e.getElement(i.id);Me(i,l)}function b(i){var t=In.tileGroupPrefix+i,n=e.getElement(t);kt(n)||(n.style.opacity="1")}function P(){T(Tn.centreShape),T(Tn.innerCircle),T(Tn.outerCircle)}function T(i){i.isVisible=!1,e.isFunction(i.gsapTimeline.pause)&&i.gsapTimeline.pause(0),e.isFunction(i.gsapTimeline.progress)&&i.gsapTimeline.progress(1,!0),e.isFunction(i.gsapExplodeTimeline.pause)&&i.gsapExplodeTimeline.pause(0)}function I(){Bi("centreShape")}function C(){A("centreShape",Tn.centreShape,In.circleRadii[1],In.circleRadii[7],!0),A("innerCircle",Tn.innerCircle,In.circleRadii[4],In.viewMaxPoint,!1),A("outerCircle",Tn.outerCircle,In.circleRadii[7],In.viewMaxPoint,!1)}function A(i,t,n,l,r){var a=e.getElement(i);if(kt(a))Vt("Failed to find shape: "+i);else{zt("initShape: shapeId: "+i),nt(a,t.isVisible);var s=In.shapeTimelineDuration;E(a,t,s,n),s=In.shapeExplodeDuration,k(a,t,s,l,r)}}function E(i,t,n,l){var r=gsap.timeline({paused:!0,ease:"power4.inOut",onComplete:Qe,onCompleteParams:[t]});t.gsapTimeline=r;var a=In.centre.x,s=In.centre.y,o=1,c=i.children;if(!kt(c)){zt("initShapeTimeline: have : "+c.length+" children");for(var u=0;u<c.length;u++){var d=c[u];e.isEmptyString(d.id)&&(d.id="csh"+u);var f=d.getBBox(),v=f.x,p=f.y,h=We(a,s,l),y=e.randomIntFromInterval(0,360)*o;o*=-1;var m=e.randomFloatFromInterval(.1,2),g=h.x-v,x=h.y-p,S=d.id,b=gsap.from(e.toCssIdQuery(S),{x:g,y:x,rotation:y,scale:m});r.add(b,0)}r.totalDuration(n)}}function k(i,t,n,l,r){var a=gsap.timeline({paused:!0,ease:"slow",onComplete:Xe,onCompleteParams:[t]});t.gsapExplodeTimeline=a;var s=In.centre.x,o=In.centre.y,c=i.children;if(!kt(c)){zt("initShapeExplodeTimeline: have : "+c.length+" children");for(var u=0;u<c.length;u++){var d=c[u];e.isEmptyString(d.id)&&(d.id="csh"+u);var f=d.id,v=d.getBBox(),p=v.x,h=v.y,y=v.width,m=v.height,g=null;if(g=r?We(s,o,l):He(s,o,p,h,y,m,l),kt(g))return void Vt("initShapeExplodeTimeline: calculated invalid random point");var x=g.x-p,S=g.y-h,b=gsap.to(e.toCssIdQuery(f),{x:x,y:S});a.add(b,0)}a.totalDuration(n)}}function w(){for(var e=In.circleRadii,i=In.centre,t=In.tileAngles,n=In.tileRotationDuration,l=In.tileRotationAngle,r=In.tileRotationYoyo,a=In.tileRotationReps,s=0;s<e.length;s++){var o=Tn.tileCircles[s];o.id=In.tileCircleGroupPrefix+(s+1);var c=De(o.id,n,l,r,a);o.tweens.push(c),l*=-1;for(var u=e[s],d=1;d<t.length;d++){var f=t[d-1],v=t[d];D(i.x,i.y,u,f,v,s+1,d)}}}function V(){var i=Tn.tiles;if(e.isArray(i)){var n=In.centre,l=n.x,r=n.y,a=In.circleRadii[In.circleRadii.length-1]+1,s=In.outerFrameRadius,o=In.frameParentId,c=In.outerFrameId,u=t.createPathElement(c),d=In.frameStyle;Et(u,d);var f=t.createTorusPath(l,r,a,s);wt(f)&&u.setAttribute("d",f),e.addChildToParentId(o,u)}else Vt("createOuterFrame: invalid tiles")}function z(){var i=In.circleRadii[7]+2,n=In.centre,l=In.stageParentId,r=t.createSvgCircle(n.x,n.y,i,l);F(r),e.addChildToParentId(l,r)}function F(i){In.stageVisibilityStyle.opacity=Tn.stageAlpha,Tn.stageAlpha>0?In.stageVisibilityStyle.visibility=Ut:In.stageVisibilityStyle.visibility=jt,e.setElementAttributes(i,In.stageStyle),e.setElementStyleProperty(i,In.stageVisibilityStyle)}function L(){var i=In.stageParentId,t="c"+i,n=e.getElement(t);kt(n)||F(n)}function M(){var i=bt();kt(i)||(Pn=i,e.listen("resize",l,ce),e.listen("orientationchange",l,ce),O("Welcome to","<span style='color:blueviolet;'>ZScore</span>","awaiting performance start ...",null,!0))}function O(e,i,t,n,l){if(!kt(Pn)){var r=!1;if(!kt(e)){var a=e.trim();Tn.instructions.l1!=a&&(Tn.instructions.l1=a,r=!0)}if(!kt(i)){a=i.trim();Tn.instructions.l2!=a&&(Tn.instructions.l2=a,r=!0)}if(!kt(t)){a=t.trim();Tn.instructions.l3!=a&&(Tn.instructions.l3=a,r=!0)}kt(n)||(Tn.instructions.bckgCol=n),l?r&&lt():st()}}function D(i,n,l,r,a,s,o){var c=In.tilePrefix+e.toStr(s)+In.elementIdDelimiter+e.toStr(o),u=t.createPathElement(c);if(kt(u))Vt("createSvgTile: Failed to create tile: "+c);else{var d=In.tileCircleGroupPrefix+e.toStr(s),f=In.tileGroupPrefix+c,v=t.createGroupElement(f);e.addChildToParentId(d,v),e.listen("mouseenter",v,te),e.listen("mouseleave",v,ne),e.listen("touchend",v,ie),e.listen("mouseup",v,ee);u=t.createPathElement(c);e.addChildToParentId(f,u);var p=s-1,h=o-1,y=Tn.tiles[p][h];if(kt(y))Vt("createSvgTile: Invalid tile state");else{y.id=c;var m=t.createArc(i,n,l,r,a);y.arc=m,Me(y,u);var g=null;kt(y.txt)||(g=y.txt);var x=null;if(s<=1)x=t.createPieTilePath(i,n,m),N(i,n,l,r,a,o,c,f,g),R(y,i,n,m.endX,m.endY);else{var S=Tn.tiles[p-1][h],b=S.arc;x=t.createTorusTilePath(m,b),U(i,n,r,a,o,b,m,c,f,g),R(y,b.endX,b.endY,m.endX,m.endY)}wt(x)&&u.setAttribute("d",x)}}}function R(e,i,n,l,r){var a=An+e.id;e.playLine=t.createSvgLine(i,n,l,r,0,a)}function N(i,n,l,r,a,s,o,c,u){var d=In.tileTextPathElementPrefix+o,f=t.createPathElement(d),v=In.tileStylePieTextPathElement,p=r+e.round((a-r)/2,1),h=i,y=n-l,m=null;s>4&&s<9?(m=t.createLinePath(h,y,i,n),v=In.tileStyleInvertedPieTextPathElement):m=t.createLinePath(i,n,h,y),f.setAttribute("d",m),t.rotateElement(f,p,i,n),u.sizeMultiplier=In.tileTextSizeMultiplier.pie,j(u,f,d,c,o,v)}function G(e,i,n,l,r,a){var s=In.selectedPrefix+r+a,o=t.createPathElement(s),c=In.shapeStyleInvisible,u=t.createLinePath(e,i,n,l);return o.setAttribute("d",u),Et(o,c),o}function U(e,i,n,l,r,a,s,o,c,u){var d=a.rX+(s.rX-a.rX)/2,f=t.createArc(e,i,d,n,l),v=t.invertArc(f);r>2&&r<7&&(v=f);var p=In.tileTextPathElementPrefix+o,h=t.createArcPath(v),y=t.createPathElement(p);y.setAttribute("d",h);var m=In.tileStyleTorusTextPathElement;u.sizeMultiplier=In.tileTextSizeMultiplier.torus,j(u,y,p,c,o,m)}function j(i,n,l,a,o,c){Et(n,In.tileStyleTextPathDef),e.addFirstChildToParent(qi(),n);var u=t.createTextElement(In.tileTextElementPrefix+o);Et(u,In.tileStyleTextElement);var d=t.createTextPathElement(In.tileTextElementPathPrefix+o);d.setAttribute("href",e.toCssIdQuery(l)),Et(d,c);var f=t.createTspanElement(In.tileTextSpanPrefix+o);Et(f,In.tileStyleTextSpan);var v=r.createTextNode(Lt);f.appendChild(v),d.appendChild(f),u.appendChild(d),e.addChildToParentId(a,u);var p=Lt,h=1;e.isObjectInstanceOf(s,i)||(p=i.value,h=i.sizeMultiplier),B(p,n,f,h)}function B(i,t,n,l){if(!kt(n)&&!kt(t)){var r=n;if(!kt(r)){var a=r.textContent,s=Lt;if(e.isString(i)&&Lt!==i&&(s=i),a!==s){var o=s,c=o.length;if(c<In.tileTextMinLength)for(var u=In.tileTextMinLength-c,d=0;d<u;d++)o+=Ot;var f=t.getTotalLength(),v=l,p=e.getElement(In.testTextElementId);p.textContent=o;var h=10,y=Lt+h+"px";p.setAttribute("font-size",y);var m=p.getComputedTextLength();0===m&&(m=f);var g=f/m;h*=g*v,h=Math.floor(h),y=Lt+h+"px",zt("setTileText: text: "+s+" pathLen: "+f+" testTextLen: "+m+" ratio: "+g+" fontSize: "+y),r.setAttribute("font-size",y),r.textContent=s}}}}function W(e){return kt(e)?null:e.isVisible?In.shapeStyleVisible:In.shapeStyleInvisible}function H(e){return e.isVisible?wt(e.txt)&&!e.txt.isVisible?In.tileStyleTextElementInvisible:In.tileStyleTextElement:In.tileStyleTextElementInvisible}function Q(e){return kt(e)?In.tileStylePlayLineInactive:e.isPlaying?In.tileStylePlayLine:In.tileStylePlayLineInactive}function X(e){return e.isVisible?In.textStyleVisible:In.textStyleInvisible}function q(e){return kt(e)?null:e.isPlaying?In.tileStyleOverlayPlaying:e.isPlayingNext?In.tileStyleOverlayPlayingNext:e.isSelected?In.tileStyleOverlaySelected:null}function Y(e){return kt(e)?null:e.isPlaying?In.tileStylePlaying:e.isPlayingNext?In.tileStylePlayingNext:e.isPlayed?In.tileStylePlayed:e.isVisible?e.isSelected?In.tileStyleSelected:e.isActive?In.tileStyleActive:In.tileStyleInActive:In.tileStyleInvisible}function Z(){for(var i=e.initArray(Tn.tiles.length,null),t=0;t<Tn.tiles.length;t++)for(var n=Tn.tiles[t],l=0;l<n.length;l++){var r=Tn.tiles[t][l];if(r.isActive){var a=e.getElement(r.id),s=i[t];kt(s)&&(s=_(t),i[t]=s),J(a,r,s)}}}function _(i){var t=$(i);if(kt(t))return null;var n=e.arrSortNumAsc(t);if(n.length<1)return null;var l=tn,r=Kt-l.r,a=$t-l.r,s=n[0],o=n[n.length-1];return s===o&&(r=0,a=0),[s,o,r,a]}function J(i,t,n){if(t.isActive){var l=en,r=t.clickCount;if(!(r<0)){var a=K(t,n);l=e.modColour(l,a),t.modFill=l,i.setAttribute(Gt,l)}}}function K(i,t){var n=i.clickCount,l=In.colModPerClick*n;if(!e.isArray(t)||4!=t.length)return l;l=e.mapRange(n,t[0],t[1],t[2],t[3]);return l}function $(i){var t=e.initArray(Tn.tiles[0].length,0);if(i<0||i>=Tn.tiles.length)return t;for(var n=Tn.tiles[i],l=0;l<n.length;l++){var r=Tn.tiles[i][l],a=r.clickCount;r.isPlayed&&(a=0),t[l]=a}return t}function ee(e){zt("onMouseUp:"),Sn||ae(this)}function ie(e){zt("onTouchEnd:"),ae(this)}function te(e){Sn||le(this)}function ne(e){Sn||re(this)}function le(i){if(!e.isObject(i))return null;var t=i,n=i.id;if(ge(n)?n=be(n):me(n)&&(n=xe(n)),!he(n))return zt("onElementPointerEntry: invalid tile id: "+n),null;t=e.getElement(n);var l=ve(n);wt(l)&&l.isActive||Et(t,In.tileStyleOnPonterEntry)}function re(i){if(e.isObject(i)){var t=de(i);if(!kt(t)){var n=fe(t);kt(n)?zt("onPointerLeave: invalid selected tile"):n.isActive||Me(n,t)}}}function ae(e){n.isReady()||h();var i=fe(e);kt(i)?zt("processSelectedTile: invalid selected tile"):se(i,e)}function se(t,n){oe(t);var l=t.id,r=e.getElement(l);if(!kt(r)){var a=ue(l),s=Tn.tileCircles[a.x];if(t.isActive||!t.isVisible){if(!(t.isPlaying||t.isPlayingNext||t.isPlayed)){if(l!==Tn.selectedTileId&&wt(Tn.selectedTileId)){var o=ve(Tn.selectedTileId);o.isSelected=!1;var c=e.getElement(Tn.selectedTileId);Me(o,c),Ie(o,c)}t.isSelected=!t.isSelected,t.isSelected&&(Tn.selectedTileId=l,s.selectedId=l),Me(t,r),Ie(t,r);var u={};u[Rt]=t.id,u[Nt]=t.isSelected,i.sendEvent(Dt,u)}}else for(var d=s.tweens,f=0;f<d.length;f++){var v=d[f];St(v)}}}function oe(i){var t=Tn.speech;t.isPlaySpeechSynthOnClick&&n.isSpeachReady()&&e.isString(t.speechText)&&di(t.speechText,t.speechVoice,t.speechIsInterrupt,i)}function ce(i){if(!e.isObject(this))return null;lt()}function ue(i){if(kt(i))return null;if(!e)return Vt("getTileRowCol: invalid zsUtil"),null;var t=e.replace(i,In.tilePrefix,Lt),n=t.split(In.elementIdDelimiter);if(!e.isArray(n)||2!==n.length)return zt("getTileState: invalid tile info: "+t),null;var l=e.toInt(n[0])-1,r=e.toInt(n[1])-1;return e.createPoint(l,r)}function de(i){if(!e.isObject(i))return null;var t=i.id;return he(t)?i:(ge(t)?t=be(t):me(t)&&(t=xe(t)),kt(t)?null:e.getElement(t))}function fe(i){if(!e.isObject(i))return null;var t=i.id;return ge(t)?t=be(t):me(t)&&(t=xe(t)),ve(t)}function ve(e){if(!he(e))return zt("getTileState: invalid tile id: "+e),null;var i=ue(e);return kt(i)?null:Tn.tiles[i.x][i.y]}function pe(i){return!(kt(i)||!e.isString(i))&&e.startsWith(i,En)}function he(i){return!(kt(i)||!e.isString(i))&&e.startsWith(i,In.tilePrefix)}function ye(i){return!(kt(i)||!e.isString(i))&&e.startsWith(i,In.tileCircleGroupPrefix)}function me(i){return!(kt(i)||!e.isString(i))&&e.startsWith(i,In.tileTextElementPrefix)}function ge(i){return!(kt(i)||!e.isString(i))&&e.startsWith(i,In.tileGroupPrefix)}function xe(i){if(kt(i)||!e.isString(i))return!1;var t=i.substring(In.tileTextElementPrefix.length,i.length);return he(t)?t:null}function Se(i){if(kt(i)||!e.isString(i))return!1;var t=i.substring(Cn,i.length);return he(t)?t:null}function be(i){if(kt(i)||!e.isString(i))return!1;var t=i.substring(In.tileGroupPrefix.length,i.length);return he(t)?t:null}function Pe(i){if(kt(i)||!e.isString(i))return!1;var t=i.substring(In.tileCircleGroupPrefix.length,i.length),n=e.toInt(t)-1;if(!(n<0||n>=Tn.tileCircles.length))return Tn.tileCircles[n];Vt("getCircleGroupIndexFromId: Invalid circle group index: "+n)}function Te(i,t){if(!kt(i)&&!kt(t)){var n=t.id,l=In.tileTextPathElementPrefix+n,r=e.getElement(l);if(!kt(r)){var a=In.tileTextElementPrefix+n,o=e.getElement(a);if(!kt(o)){var c=Lt;kt(i)||kt(i.txt)||(c=i.txt);var u=In.tileTextSpanPrefix+n,d=e.getChildElement(o,e.toCssIdQuery(u));if(!kt(d)){var f=Lt,v=1;e.isObjectInstanceOf(s,c)||(f=c.value,v=c.sizeMultiplier),B(f,r,d,v)}}}}}function Ie(i,t){var n=i.id,l=In.overlayPrefix+n,r=e.getElement(l),a=q(i);kt(a)?kt(r)||r.remove():(kt(r)&&(r=e.cloneElement(t,l)),Et(r,a),e.addChildToParentId(In.overlayParentId,r)),Ce(i)}function Ce(i){if(!kt(i.playLine)){var t=i.playLine.id,n=e.getElement(t);kt(n)&&(n=i.playLine),wt(n)&&(Ae(i,n),e.addChildToParentId(In.overlayParentId,n))}}function Ae(e,i){if(!kt(i)){var t=Q(e);wt(t)&&Et(i,t)}}function Ee(i){for(var t=[],n=[],l=null,r=null,a=0;a<Tn.tileCircles.length;a++){var s=Tn.tileCircles[a],o=s.selectedId;if(!kt(o)){var c=e.getElement(o);if(kt(c))Vt("setSelectedTilesOverlay: can not find tile for selected id: "+o);else{var u=In.selectedPrefix+o,d=e.getElement(u);if(kt(d)&&(d=e.cloneElement(c,u),Et(d,In.shapeStyleInvisible),e.addChildToParentId(In.overlayParentId,d),t.push(d),a>0)){var f=ve(o);r=f;var v=we(a);kt(l)&&(l=v);var p=ke(f,v);if(kt(p))continue;var h=e.getElement(p.id);if(!kt(h))continue;e.addChildToParentId(In.overlayParentId,p),n.push(p)}}}}p=ke(l,r);if(!kt(p)){h=e.getElement(p.id);kt(h)&&(e.addChildToParentId(In.overlayParentId,p),n.push(p))}var y=e.getElement(In.overlayParentId),m=In.overlayInDuration;kt(i)||(m=i);var g=Ve(y,m,In.outerFrameRadius);g.play();for(a=0;a<t.length;a++){var x=t[a];Et(x,In.tileStyleSelectedPath)}for(a=0;a<n.length;a++){x=n[a];Et(x,In.tileStyleConnectorPath)}}function ke(e,i){if(kt(e)||kt(i))return null;var t=e.arc,n=i.arc;if(kt(t)||kt(n))return null;var l=t.startX,r=t.startY,a=n.endX,s=n.endY;return G(a,s,l,r,e.id,i.id)}function we(e){if(e<=0)return null;if(e>=Tn.tileCircles.length)return Tn.tileCircles[Tn.tileCircles.length-1];for(var i=e-1;i>=0;i--){var t=Tn.tileCircles[i],n=t.selectedId;if(!kt(n))return ve(n)}return null}function Ve(i,t,n){var l=gsap.timeline({paused:!0,ease:"power4.inOut"}),r=In.centre.x,a=In.centre.y,s=1,o=i.children;if(!kt(o)){zt("createSelectedTileTimeline: have : "+o.length+" children");for(var c=0;c<o.length;c++){var u=o[c];e.isEmptyString(u.id)&&(u.id="csh"+c);var d=u.getBBox(),f=d.x,v=d.y,p=d.width,h=d.height,y=He(r,a,f,v,p,h,n),m=e.randomIntFromInterval(0,360)*s;s*=-1;var g=e.randomIntFromInterval(5,15),x=y.x-f,S=y.y-v,b=u.id,P=gsap.from(e.toCssIdQuery(b),{x:x,y:S,rotation:m,scale:g});l.add(P,0)}return l.totalDuration(t),l}}function ze(){e.removeChildren(In.overlayParentId)}function Fe(){ze();for(var e=0;e<Tn.tileCircles.length;e++){var i=Tn.tileCircles[e];i.selectedId=null}}function Le(e){e.isActive||(e.modFill=null)}function Me(i,t){var n=Y(i);Et(t,n),i.isActive&&wt(i.modFill)&&t.setAttribute(Gt,i.modFill);var l=In.tileTextElementPrefix+i.id,r=e.getElement(l);if(!kt(r)){var a=H(i);Et(r,a)}}function Oe(i,t){var n=W(i),l=e.getElement(t);Et(l,n)}function De(i,t,n,l,r){if(!kt(i)){var a=!1;wt(l)&&(a=l);var s=0;return wt(r)&&(s=r),gsap.from(e.toCssIdQuery(i),{duration:t,rotation:n,svgOrigin:Lt+In.centre.x+Mt+In.centre.y,onComplete:et,onCompleteParams:[i],paused:!0,yoyo:a,repeat:s,ease:"power1.inOut"})}Vt("rotate: Invalid objectId: "+i)}function Re(e){St(e)}function Ne(e,i,t,n){if(kt(e))Vt("initTilePlaylineTimeline: Invalid tileState");else{if(wt(e.playLineTl))return e.playLineTl;if(!kt(i)){var l=i.id,r=gsap.timeline({paused:!0,ease:"none",onComplete:Ge,onCompleteParams:[e]});e.playLineTl=r;var a=je(l,In.tilePlaylineAlphaDur,1);r.add(a,0);var s=Ue(l,t,n);r.add(s,0);var o=je(l,In.tilePlaylineAlphaDur,0),c=">";return r.add(o,c),r}Vt("initTilePlaylineTimeline: Invalid playline: ")}}function Ge(e){zt("onTilePlaylineTimelineComplete: progress: "+e.playLineTl.progress())}function Ue(i,t,n){return gsap.to(e.toCssIdQuery(i),{duration:t,rotation:n,svgOrigin:Lt+In.centre.x+Mt+In.centre.y,onComplete:et,onCompleteParams:[i],yoyo:!1,repeat:0,ease:"none"})}function je(i,t,n){return gsap.to(e.toCssIdQuery(i),{duration:t,autoAlpha:n,onComplete:it,onCompleteParams:[i]})}function Be(i,t,n){if(!kt(i))return gsap.to(e.toCssIdQuery(i),{duration:t,autoAlpha:n,onComplete:it,onCompleteParams:[i],paused:!0});Vt("dissolve: Invalid objectId: "+i)}function We(i,t,n){if(!e)return Vt("getRandomPointInsideCircle: invalid zsUtil"),null;var l=2*Math.PI*Math.random(),r=Math.sqrt(Math.random()),a=n*r*Math.cos(l)+i,s=n*r*Math.sin(l)+t;return e.createPoint(a,s)}function He(i,t,n,l,r,a,s){var o=n-i,c=l-t,u=Math.sqrt(Math.pow(o,2)+Math.pow(c,2)),d=Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),f=s+2*d,v=f/u,p=o*v,h=c*v,y=e.round(n+p,0),m=e.round(l+h,0);return e.createPoint(y,m)}function Qe(e){zt("onShapeTimelineComplete: progress: "+e.gsapTimeline.progress())}function Xe(e){zt("onShapeExplodeTimelineComplete: progress: "+e.gsapExplodeTimeline.progress())}function qe(i){if(e.isArray(i))for(var t=0;t<i.length;t++)Wi(i[t]);else Wi(i)}function Ye(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Xi(i,t[l],n);else Xi(i,t,n)}function Ze(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)_e(i,t[l],n);else _e(i,t,n)}function _e(e,i,t){if(!kt(i))switch(zt("runAudio: "+e+Mt+i),i){case"all":Je(e,t);break;case"player":Ke(e,t);break;case"granulator":$e(e,t);break;case"speechSynth":oi(e,t)}}function Je(i,t){if(e.isString(i))switch(i){case"volume":gi(t);break;default:return void Vt("runPlayer: Unknown actionId: "+i)}}function Ke(i,t){if(e.isString(i))switch(i){case"play":yi(t);break;case"volume":mi(t);break;default:return void Vt("runPlayer: Unknown actionId: "+i)}}function $e(i,t){if(e.isString(i))switch(i){case"play":ei(t);break;case"stop":ii(t);break;case"config":si(t);break;case"rampLinear":ti(t);break;case"rampSin":li(t);break;case"volume":ni(t);break;default:return void Vt("runAudioGranulator: Unknown actionId: "+i)}}function ei(e){kt(n)?Vt("runAudioPlayGranulator: Invalid zsAudio lib"):n.playGranulator()}function ii(e){kt(n)?Vt("runAudioPlayGranulator: Invalid zsAudio lib"):n.stopGranulator()}function ti(i){if(kt(n))Vt("runAudioPlayGranulator: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null,r=null;kt(i.paramName)||(t=i.paramName),kt(i.endValue)||(l=i.endValue),kt(i.duration)||(r=i.duration),n.setGranulatorRampLinear(t,l,r)}}function ni(i){if(kt(n))Vt("runAudioPlayGranulator: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;kt(i.level)||(t=i.level),kt(i.timeMs)||(l=i.timeMs),n.setGranulatorGain(t,l)}}function li(i){if(kt(n))Vt("runAudioPlayGranulator: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null,r=null,a=null;kt(i.paramName)||(t=i.paramName),kt(i.amplitude)||(l=i.amplitude),kt(i.frequency)||(r=i.frequency),kt(i.duration)||(a=i.duration),n.setGranulatorRampSin(t,l,r,a)}}function ri(){kt(n)?Vt("runAudioPlayGranulator: Invalid zsAudio lib"):n.resetGranulator()}function ai(){Fe()}function si(i){kt(n)?Vt("runAudioPlayGranulator: Invalid zsAudio lib"):e.isObject(i)&&n.setGranulatorConfig(i)}function oi(i,t){if(e.isString(i))switch(i){case"play":ui(t);break;case"stop":fi(t);break;case"config":vi(t);break;case"state":pi(t);break;case"rampLinear":hi(t);break;case"volume":ci(t);break;default:return void Vt("runSpeechSynth: Unknown actionId: "+i)}}function ci(i){if(kt(n))Vt("setAudioSpeechVolume: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;kt(i.level)||(t=i.level),kt(i.timeMs)||(l=i.timeMs),n.setSpeechVolume(t,l)}}function ui(e){if(kt(n))Vt("runPlaySpeechSynth: Invalid zsAudio lib");else if(kt(e))Vt("runPlaySpeechSynth: Invalid params");else{var i=Lt,t="random",l=!1;kt(e.speechText)||(i=e.speechText),kt(e.speechVoice)||(t=e.speechVoice),kt(e.speechIsInterrupt)||(l=e.speechIsInterrupt);var r=Tn.playingTileId;kt(r)&&(r=Tn.selectedTileId);var a=ve(r);di(i,t,l,a)}}function di(i,t,l,r){if(!kt(i)){if(e.contains(i,mn)){var a=null;kt(r)||(a=r.txt),i=e.isString(a.value)?e.replace(i,mn,a.value):e.replace(i,mn,Lt)}n.speak(i,t,l)}}function fi(e){kt(n)?Vt("runStopSpeechSynth: Invalid zsAudio lib"):n.stopSpeach()}function vi(e){kt(n)?Vt("updateSpeechCofig: Invalid zsAudio lib"):n.setSpeechConfig(e)}function pi(i){if(e.isObject(i)){var t=Tn.speech;kt(i.isPlaySpeechSynthOnClick)||(t.isPlaySpeechSynthOnClick=i.isPlaySpeechSynthOnClick),kt(i.speechText)||(t.speechText=i.speechText),kt(i.speechVoice)||(t.speechVoice=i.speechVoice),kt(i.speechIsInterrupt)||(t.speechIsInterrupt=i.speechIsInterrupt)}else Vt("setSpeechState: Invalid params")}function hi(i){if(e.isObject(i)){var t=null;kt(i.paramName)||(t=i.paramName);var l=null;kt(i.endValue)||(l=i.endValue);var r=null;kt(i.duration)||(r=i.duration),n.rumpLinearSpeechParam(t,l,r)}else Vt("rampLinearSpeechParam: Invalid params")}function yi(i){if(kt(n))Vt("runPlayerPlay: Invalid zsAudio lib");else if(e.isObject(i)){var t=0;kt(i.index)||(e.isString(i.index)?t=e.toInt(i.index):e.isNumeric(i.index)&&(t=i.index));var l=null,r=null,a=null;kt(i.startTime)||(l=i.startTime),kt(i.offset)||(r=i.offset),kt(i.duration)||(a=i.duration),n.playAudio(t,l,r,a)}}function mi(i){if(kt(n))Vt("setAudioMasterVolume: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;kt(i.level)||(t=i.level),kt(i.timeMs)||(l=i.timeMs),n.setPlayerVolume(t,l)}}function gi(i){if(kt(n))Vt("setAudioMasterVolume: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;kt(i.level)||(t=i.level),kt(i.timeMs)||(l=i.timeMs),n.setMasterVolume(t,l)}}function xi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Si(i,t[l],n);else Si(i,t,n)}function Si(i,t,n){if(e.isString(i)&&e.isObject(n))switch(zt("rotate: "+t),i){case"start":bi(t,n);break;case"reset":Pi(t,n);break;default:return void Vt("Unknown rotate actionId: "+i)}}function bi(i,t){var n=0,l=360;kt(t.duration)||(n=t.duration),kt(t.angle)||(l=t.angle);var r=null;if(he(i)){var a=In.tileGroupPrefix+i,s=e.getElement(i),o=tt(s);e.isArray(o)&&o.length>0?r=o[0]:(r=De(a,n,l),o.push(r))}else if(pe(i)){r=null;var c=e.getElement(i),u=Se(i),d=ve(u);if(kt(c)&&wt(u)&&(Ce(d),c=e.getElement(d.playLine.id)),wt(c)){var f=Ne(d,c,n,l);Re(f)}}else if(ye(i)){var v=Pe(i);if(!kt(v)){var p=v.tweens;r=p,e.isArray(p)&&(r=p[0])}}St(r)}function Pi(i,t){if(e.isString(i)&&he(i)){var n=e.getElement(i),l=tt(n);if(e.isArray(l)&&l.length>0){var r=l[0];kt(r)||r.pause(0)}}}function Ti(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Ii(i,t[l],n);else Ii(i,t,n)}function Ii(i,t,n){if(e.isString(i)&&e.isObject(n))switch(zt("runAlpha: "+t),i){case"start":Ci(t,n);break;default:return void Vt("Unknown aplha actionId: "+i)}}function Ci(i,t){var n=0;kt(t.duration)||(n=t.duration);var l=1;kt(t.value)||(l=t.value);var r=[];if(he(i)){var a=In.tileGroupPrefix+i;r.push(Be(a,n,l))}else switch(i){case In.stageParentId:if(Tn.stageAlpha===l)return;var s="c"+In.stageParentId,o=e.getElement(s);if(kt(o))return void Vt("Invalid stage circle id: "+s);r.push(Be(s,n,l))}for(var c=0;c<r.length;c++)zt("runAlphaStart: tween: "+i),St(r[c])}function Ai(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Ei(i,t[l],n);else Ei(i,t,n)}function Ei(i,t,n){if(e.isString(i))switch(zt("reset: actionId: "+i+Mt+t),i){case"all":ki(t,n);break;case"elements":wi(t,n);break;default:return void Vt("Unknown reset actionId: "+i)}}function ki(i,t){if(e.isString(i))switch(i){case"tiles":x();break;case"shapes":P();break;case"elements":f();break;case"granulator":ri();break;case"selectedTiles":ai();break;default:return void Vt("Unknown reset target: "+i)}}function wi(e,i){if(he(e))S(ve(elementId));else switch(e){case"centreShape":return T(Tn.centreShape);case"innerCircle":return T(Tn.innerCircle);case"outerCircle":return T(Tn.outerCircle);case"zoom":return I();default:zt("resetElements: unknown target: "+e)}}function Vi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)zi(i,t[l],n);else zi(i,t,n)}function zi(i,t,n){if(e.isString(i))switch(zt("runActivate: actionId: "+i+Mt+t),i){case"display":Fi(t,n);break;default:return void Vt("Unknown activate actionId: "+i)}}function Fi(e,i){if(!kt(e))switch(zt("runDisplayAction: target: "+e),e){case"selectedTiles":Li(i)}}function Li(e){zt("runDisplaySelectedTiles: ");var i=null;kt(e)||kt(e.duration)||(i=e.duration),Ee(i)}function Mi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Oi(i,t[l],n);else Oi(i,t,n)}function Oi(i,t,n){if(e.isString(i))switch(zt("runDeActivate: actionId: "+i+Mt+t),i){case"display":Di(t,n);break;default:return void Vt("Unknown DeActivate actionId: "+i)}}function Di(e,i){if(!kt(e))switch(zt("runDeActivateDisplayAction: target: "+e),e){case"overlays":ze()}}function Ri(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Ni(i,t[l],n);else Ni(i,t,n)}function Ni(i,t,n){if(e.isString(i))switch(zt("stop: actionId: "+i+Mt+t),i){case"stop":Gi(t,n);break;default:return void Vt("Unknown stop actionId: "+i)}}function Gi(e,i){if(!kt(e))switch(zt("runStopAction: target: "+e),e){case"all":Ui(i);break;case"granulator":ii(i);break;case"speechSynth":fi(i)}}function Ui(e){zt("runStopAll: "),!kt(n)&&n.isReady()&&(ii(e),fi(e))}function ji(e){kt(e)||(Tn.stageAlpha=e,L())}function Bi(e){zt("zoomLevel: "+e),kt(e)||Wi(e)}function Wi(e){var i=qi();if(kt(i))zt("zoom: invalid canvas");else{zt("zoomTarget: "+e);var t=Qi(e);gsap.to(i,{attr:{viewBox:t},ease:"power3.out",duration:In.zoomDuration})}}function Hi(e){O(e.line1,e.line2,e.line3,e.colour,e.isVisible)}function Qi(i){switch(e.isString(i)||(i="default"),i){case"centreSmall":return In.zoomCentreSmall;case"centreShape":return In.zoomCentreShape;case"innerCircleSmall":return In.zoomInnerCircleSmall;case"innerCircle":return In.zoomInnerCircle;case"outerCircleSmall":return In.zoomOuterCircleSmall;case"outerCircle":default:return In.zoomFull}}function Xi(i,t,n){if(e.isString(t)&&e.isString(i)){zt("runTimeline: "+t);var l=null;switch(t){case"centreShape":l=Tn.centreShape.gsapTimeline;break;case"innerCircle":l=Tn.innerCircle.gsapTimeline;break;case"outerCircle":l=Tn.outerCircle.gsapTimeline;break;case"centreShapeExplode":l=Tn.centreShape.gsapExplodeTimeline;break;case"innerCircleExplode":l=Tn.innerCircle.gsapExplodeTimeline;break;case"outerCircleExplode":l=Tn.outerCircle.gsapExplodeTimeline;break;default:return void Vt("runTimeline: invalid target: "+t)}switch(i){case"start":Yi(l,n);break;case"stop":Zi(l);break;case"end":_i(l);break;case"reset":Ji(l);break;case"reverse":$i(l,n);break;case"resume":Ki(l,n);break;default:return void Vt("runTimeline: invalid actionId: "+i)}}}function qi(){return e.getElement("svgCanvas")}function Yi(e,i){if(kt(e))Vt("startTimeline: invalid timeline");else{if(!kt(i)&&!kt(i.duration)){var t=i.duration;e.totalDuration(t)}var n=e.progress();n>0?e.restart():e.play()}}function Zi(e){kt(e)?Vt("stopTimeline: invalid timeline"):e.pause()}function _i(e){kt(e)?Vt("endTimeline: invalid timeline"):e.pause(1)}function Ji(e){kt(e)?Vt("stopTimeline: invalid timeline"):e.pause(0)}function Ki(e,i){if(kt(e))Vt("resumeTimeline: invalid timeline");else if(!e.isActive()){var t=e.totalDuration();if(!kt(i)&&!kt(i.duration))t=i.duration;var n=e.progress();1==n||0==n?(e.totalDuration(t),e.restart()):e.resume()}}function $i(e,i){if(kt(e))Vt("reverseTimeline: invalid timeline");else{var t=e.progress();if(t<1&&_i(e),!kt(i)&&!kt(i.duration)){var n=i.duration;e.totalDuration(n)}e.reverse()}}function et(i){e.getElement(i)}function it(i){e.getElement(i)}function tt(i){if(!e.isObject(i))return[];if(he(i.id)){var t=fe(i);return t.tweens}return gsap.getTweensOf(i)}function nt(e,i){if(!kt(e)){var t="hidden";i&&(t="visible"),Et(e,{visibility:t})}}function lt(i){if(!kt(Pn)){Pn.innerHTML=Lt;var t=Tn.instructions.l1,n=In.textSpanPrefix+"1",l=Tn.instructions.l2,r=In.textSpanPrefix+"2",a=Tn.instructions.l3,s=In.textSpanPrefix+"3",o=Lt;i||(i=Lt,e.isEmptyString(t)||(o=rt(t,o),t=e.wrapInSpanElement(t,n),i+=t),e.isEmptyString(l)||(zt("displayInstructions: processing line2 "+l),o=rt(l,o),l=e.wrapInSpanElement(l,r),i=e.addSuffixIfNotThere(i,In.textLineBreak),i+=l),e.isEmptyString(a)||(zt("displayInstructions: processing line3 "+a),o=rt(a,o),a=e.wrapInSpanElement(a,s),i=e.addSuffixIfNotThere(i,In.textLineBreak),i+=a));var c=In.textFontSize,u=Pt(o,c,Pn);Pn.style.fontSize=Lt+u+"px",Pn.style.fontFamily=In.textFontFamily,Pn.innerHTML=i;var d=e.getChildElement(Pn,e.toCssIdQuery(n));kt(d)||(d.style.opacity=0);var f=e.getChildElement(Pn,e.toCssIdQuery(r));kt(f)||(f.style.opacity=0);var v=e.getChildElement(Pn,e.toCssIdQuery(s));if(kt(v)||(v.style.opacity=0),Tn.instructions.isVisible=!0,ot(Pn,Tn.instructions),In.textSpanIsFadeIn){var p=In.textSpanFadeTimeSec,h=In.textSpanFadeStaggerTimeSec;kt(d)||gsap.to(d,{duration:p,autoAlpha:1,ease:"power1.in"}),kt(f)||gsap.to(f,{delay:h,duration:p,autoAlpha:1,ease:"power1.in"}),kt(v)||gsap.to(v,{delay:2*h,duration:p,autoAlpha:1,ease:"power1.in"})}else kt(d)||(d.style.opacity=1),kt(f)||(f.style.opacity=1),kt(v)||(v.style.opacity=1)}}function rt(i,t){var n=e.removeMarkup(i);return n.length>t.length?n:t}function at(e){return In.textFontType+Mt+e+"px "+In.textFontFamily}function st(){kt(Pn)||(Pn.innerHTML=Lt,Tn.instructions.isVisible=!1,ot(Pn,Tn.instructions))}function ot(i,t){var n=X(t);kt(t.bckgCol)||(n.background=t.bckgCol),e.setElementStyleProperty(i,n)}function ct(e,i){kt(e)||(i||f(),wt(e.tiles)&&(i?dt(e.tiles):ft(e.tiles)),wt(e.centreShape)&&ut(e.centreShape,Tn.centreShape,"centreShape"),wt(e.innerCircle)&&ut(e.innerCircle,Tn.innerCircle,"innerCircle"),wt(e.outerCircle)&&ut(e.outerCircle,Tn.outerCircle,"outerCircle"),wt(e.actions)&&pt(e.actions),wt(e.zoomLevel)&&Bi(e.zoomLevel),wt(e.instructions)&&Hi(e.instructions),wt(e.stageAlpha)&&ji(e.stageAlpha))}function ut(e,i,t){kt(e)||kt(i)||(i.isVisible=e.isVisible,Oe(i,t))}function dt(i){if(e.isArray(i)){for(var t=[],n=0;n<i.length;n++){var l=i[n];if(e.isObject(l)){var r=l.state,a=ve(r.id),s=l.tileText,o=a.txt;a.isActive;a.isActive=r.isActive,a.isVisible=r.isVisible,a.isPlaying=r.isPlaying,a.isPlayingNext=r.isPlayingNext,a.isPlayed=r.isPlayed,a.clickCount=r.clickCount,o.value=s.value,o.isVisible=s.isVisible,t.push(a)}else Vt("processSeverTilesStateDelta: invalid server tile")}vt(t)}}function ft(i){if(e.isArray(i)&&e.isArray(i[0])){for(var t=[],n=0;n<i.length;n++)for(var l=i[n],r=0;r<l.length;r++){var a=i[n][r],s=Tn.tiles[n][r],o=a.id,c=s.id;if(o===c){var u=a.state,d=a.tileText,f=s.txt;gt(s,u)&&xt(f,d)||(s.isActive=u.isActive,s.isVisible=u.isVisible,s.isPlaying=u.isPlaying,s.isPlayingNext=u.isPlayingNext,s.isPlayed=u.isPlayed,s.clickCount=u.clickCount,f.value=d.value,f.isVisible=d.isVisible,t.push(s))}else Vt("processSeverTilesState: Server id "+o+"and client id "+c+"not identical")}vt(t)}}function vt(i){zt("Have "+i.length+" tile changes");for(var t=0;t<i.length;t++){var n=i[t],l=e.getElement(n.id);!n.isPlayed&&n.isVisible&&n.isActive||!n.isSelected||(n.isSelected=!1),Le(n),Me(n,l),Te(n,l),Ie(n,l),
n.isPlaying&&(Tn.playingTileId=n.id)}Z()}function pt(i){var t=null,n=null,l=[],r={};if(e.isArray(i))for(var a=0;a<i.length;a++){var s=i[a];wt(s.id)&&(t=s.id),wt(s.actionType)&&(n=s.actionType),wt(s.elementIds)&&(l=s.elementIds),wt(s.params)&&(r=s.params),ht(t,n,l,r)}}function ht(e,i,t,n){if(zt("doAction: "+e+" actionType: "+i),!kt(i)&&!kt(t))switch(i){case"ACTIVATE":Vi(e,t,n);break;case"ANIMATION":break;case"DEACTIVATE":Mi(e,t,n);break;case"VISIBLE":break;case"INVISIBLE":yt(t);break;case"ZOOM":qe(t);break;case"TIMELINE":Ye(e,t,n);break;case"ROTATE":xi(e,t,n);break;case"ALPHA":Ti(e,t,n);break;case"AUDIO":Ze(e,t,n);break;case"RESET":Ai(e,t,n);break;case"STOP":Ri(e,t,n);break;default:Vt("doAction: Unknown actionType: "+i)}}function yt(i){if(!kt(i))if(e.isArray(i))for(var t=0;t<i.length;t++)mt(i[t]);else mt(i)}function mt(i){if(!kt(i)){var t=e.getElement(i);if(he(i)){var n=fe(t);if(kt(n))return;n.isVisible=!1,Me(n,t)}}}function gt(e,i){return!kt(e)&&!kt(i)&&(e.id===i.id&&(e.isVisible===i.isVisible&&e.isActive===i.isActive&&e.isPlaying===i.isPlaying&&e.isPlayingNext===i.isPlayingNext&&e.clickCount===i.clickCount&&e.isPlayed===i.isPlayed))}function xt(e,i){return!kt(e)&&!kt(i)&&(e.isVisible===i.isVisible&&e.value===i.value)}function St(e){if(!kt(e)){var i=e.progress();i>0?e.restart():e.play()}}function bt(){return e.getElement(In.instructionTxtElementId)}function Pt(e,i,t){var n=1;l.innerWidth||r.documentElement.clientWidth||r.body.clientWidth;var a=l.innerHeight||r.documentElement.clientHeight||r.body.clientHeight,s=(at(n),t.clientWidth),o=s*In.textWidthCompressor,c=a*In.textAreaMax;n=It(e,i,o),n=Tt(s,n,c);var u=In.textMaxFontSize;return n>u&&(n=u),n}function Tt(e,i,t){var n=at(i),l=i,r=At(n,e,t);if(r<0)return l;var a=r*In.textNumberOfLines,s=t/a;return s<1&&(l*=s),l}function It(e,i,t){var n=at(i),l=Ct(n,e),r=l.width;if(r<=0||r>t||Math.abs(t-r)<1)return i;var a=t/r,s=i*a;return It(e,s,t)}function Ct(e,i){var t=Tn.fontCanvas,n=Tn.canvasCtx;return n.fillRect(0,0,t.width,t.height),n.textBaseline="top",n.fillStyle=Bt,n.font=e,n.measureText(i)}function At(e,i,t){var n=Tn.fontCanvas,l=Tn.canvasCtx;n.width=i,n.height=t,l.fillRect(0,0,n.width,n.height),l.textBaseline="top",l.fillStyle=Bt,l.font=e;var r="gM";l.fillText(r,0,0);for(var a=l.getImageData(0,0,n.width,n.height).data,s=-1,o=-1,c=0;c<n.height;c++)for(var u=0;u<n.width;u++){var d=4*(c*n.width+u);if(0!==a[d]){-1===s&&(s=c);break}if(u===n.width-1&&-1!==s){o=c,c=n.height;break}}var f=(o-s)*In.textHeightCompressor;return f}function Et(i,t){e.setElementAttributes(i,t)}function kt(i){return e.isNull(i)}function wt(i){return e.isNotNull(i)}function Vt(i){e.logError(i)}function zt(i){e.log(i)}const Ft="DEV",Lt="",Mt=" ",Ot="m",Dt="ELEMENT_SELECTED",Rt="elementId",Nt="selected",Gt="fill",Ut="visible",jt="hidden",Bt="#FFFFFF",Wt="#000000",Ht="#CCFFCC",Qt="#00FF00",Xt="#C0C0C0",qt="#2F4F4F",Yt="#696969",Zt="#4B4B4B",_t="#FFA500",Jt="#DC143C",Kt=204,$t=0,en="#666666",tn={r:102,g:102,b:102},nn=Yt,ln=Zt,rn=Yt,an=Bt,sn=qt,on=qt,cn=Bt,un=Bt,dn=Wt,fn=Jt,vn=Ht,pn=_t,hn=Xt,yn=Qt,mn="@TILE_TEXT@",gn="Arial";var xn=["/audio/violin-tuning.mp3","/audio/UnionRoseE2m.mp3","/audio/UnionRoseE3.mp3","/audio/UnionRoseE4.mp3","/audio/UnionRoseE5.mp3","/audio/UnionRose-m1.mp3"],Sn=null,bn=null,Pn=null,Tn={tiles:[],tileCircles:[],centreShape:{isVisible:!1,gsapTimeline:{},gsapExplodeTimeline:{}},innerCircle:{isVisible:!1,gsapTimeline:{},gsapExplodeTimeline:{}},outerCircle:{isVisible:!1,gsapTimeline:{},gsapExplodeTimeline:{}},instructions:{isVisible:!1,l1:Lt,l2:Lt,l3:Lt,bckgCol:"rgba(225, 225, 225, 0.85)"},selectedTileId:null,playingTileId:null,fontCanvas:null,canvasCtx:null,speech:{isPlaySpeechSynthOnClick:!1,speechText:"I, I clicked on "+mn,speechVoice:"random",speechIsInterrupt:!0},stageAlpha:1},In={connectionPreference:"ws,sse,poll",centre:{x:762,y:762},circleRadii:[55,92,125,194,291,401,552,750],outerFrameRadius:2e3,lineEnd:{x:762,y:12},lineLen:750,lineAngles:[0,45,90,135,180,225,270,315],tileAngles:[0,45,90,135,180,225,270,315,360],viewMinPoint:0,viewMaxPoint:1525,zoomCentreSmall:"700 700 124 124",zoomCentreShape:"660 660 204 204",zoomInnerCircleSmall:"540 540 444 444",zoomInnerCircle:"471 471 582 582",zoomOuterCircleSmall:"350 350 824 824",zoomOuterCircle:"471 471 582 582",zoomFull:"0 0 1525 1525",circlePrefix:"c",linePrefix:"l",tilePrefix:"t",overlayPrefix:"o",tilePlayLinePrefix:"pl",selectedPrefix:"s",tileRotationDuration:2,tileRotationAngle:45,tileRotationYoyo:!1,tileRotationReps:0,tileCircleGroupPrefix:"ctg",tileGroupPrefix:"g",tileTextElementPrefix:"x",tileTextPathElementPrefix:"px",tileTextElementPathPrefix:"hx",tileTextSpanPrefix:"sp",stageParentId:"stage",overlayParentId:"overlay",stageId:"stageCircle",frameParentId:"frame",outerFrameId:"outerFrame",elementIdDelimiter:"-",svgArcs:[null,null,null,null,null,null,null,null],gridParentId:"grid",gridStyle:{fill:"none",stroke:"aqua","stroke-width":"2px"},stageStyle:{fill:dn,"stroke-width":"0px","stroke-opacity":"0","pointer-events":"none"},stageVisibilityStyle:{opacity:Tn.stageAlpha,visibility:"visible"},tilesParentId:"tiles",frameStyle:{fill:un,"stroke-width":"0px","stroke-opacity":"0",visibility:"visible",opacity:1},tileStyleOverlayPlayingNext:{fill:"none",stroke:pn,"stroke-width":"1px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleOverlayPlaying:{fill:"none",stroke:vn,"stroke-width":"1px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleOverlaySelected:{fill:"none",stroke:fn,"stroke-width":"2px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleSelectedPath:{fill:"none",stroke:fn,"stroke-width":"7px",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleConnectorPath:{fill:"none",stroke:fn,"stroke-width":"2px",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleVisible:{fill:rn,stroke:hn,"stroke-width":"2px","pointer-events":"all",visibility:"visible",opacity:1},tileStyleActive:{fill:nn,stroke:hn,"stroke-width":"2px","pointer-events":"all",visibility:"visible",opacity:1},tileStyleInActive:{fill:an,stroke:hn,"stroke-width":"2px","pointer-events":"all",visibility:"visible",opacity:1},tileStyleInvisible:{visibility:"hidden"},tileStyleOnPonterEntry:{fill:sn},tileStyleSelected:{fill:on,stroke:hn,"stroke-width":"2px",visibility:"visible",opacity:1},tileStylePlayed:{visibility:"hidden"},tileStylePlaying:{fill:ln,stroke:hn,"stroke-width":"1px",visibility:"visible",opacity:1},tileStylePlayingNext:{stroke:hn,"stroke-width":"2px",visibility:"visible",opacity:1},tileStyleTextPathDef:{fill:"none",stroke:"none"},tileStyleTextElement:{visibility:"visible",opacity:1},tileStyleTextElementInvisible:{visibility:"hidden"},tileStyleTorusTextPathElement:{startOffset:"50%","text-anchor":"middle",fill:cn,stroke:"none"},tileStylePieTextPathElement:{startOffset:"90%","text-anchor":"end",fill:cn,stroke:"none"},tileStyleInvertedPieTextPathElement:{startOffset:"10%","text-anchor":"start",fill:cn,stroke:"none"},tileStyleTextSpan:{"font-family":gn,"dominant-baseline":"middle"},tileTextMinLength:5,tileTextSizeMultiplier:{torus:.8,pie:.7},tileStylePlayLine:{fill:"none",stroke:yn,"stroke-width":"4px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},tileStylePlayLineInactive:{visibility:"hidden",opacity:0},shapeStyleInvisible:{visibility:"hidden"},shapeStyleVisible:{visibility:"visible"},shapeTimelineDuration:60,shapeExplodeDuration:5,instructionTxtElementId:"instructionTxt",textLineBreak:"<br/>",textStyleInvisible:{visibility:"hidden"},textStyleVisible:{visibility:"visible"},textFontFamily:"Arial",textFontType:"normal",textFontSize:50,textMaxFontSize:70,textMaxLineLen:30,textHeightCompressor:1.1,textWidthCompressor:.9,textAreaMax:.4,textNumberOfLines:3,textSpanPrefix:"is",textSpanIsFadeIn:!0,textSpanFadeTimeSec:1,textSpanFadeStaggerTimeSec:.5,appUrlHttp:"/htp",appUrlSse:"/sse",appUrlWebsockets:"/wsoc",zoomDuration:3,all:"ALL",testTextElementId:"testTxt",colModPerClick:-20,maxColModPerClick:-150,overlayInDuration:12,tilePlaylineAlphaDur:.5};const Cn=In.linePrefix.length+In.overlayPrefix.length+In.tilePlayLinePrefix.length,An=In.overlayPrefix+In.tilePlayLinePrefix,En=In.linePrefix+In.overlayPrefix+In.tilePlayLinePrefix;return{load:function(){u()},createSvgTile:D,initTiles:g,setTileText:B}}(zsUtil,zsNet,zsSvg,zsAudio,window,document);