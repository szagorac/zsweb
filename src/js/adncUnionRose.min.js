var zscore=function(e,i,t,n,l,r){"use strict";function a(e){this.message=e,this.name="ZScoreException"}function s(e,i,t){this.value=e,this.isVisible=i,this.sizeMultiplier=t}function o(e,i,t,n,l,r,a,s,o,c,u,d){this.id=e,this.isSelected=i,this.isActive=t,this.isVisible=n,this.isPlaying=l,this.isPlayingNext=r,this.isPlayed=a,this.clickCount=s,this.arc=o,this.txt=u,this.modFill=c,this.playLine=d,this.tweens=[]}function c(e){this.id=e,this.tweens=[],this.selectedId=null}function u(){At("onLoad: "),d()}function d(){if(!(e&&i&&t&&n))throw new a("Invalid libraries. Required: zsUtil, zsNet, zsSvg and zsAudio");e.setRunMode(Et),At("init: "),pn=e.isTouchDevice(),hn=e.isSafari(navigator),At("init: IsTouch Device: "+pn+" isSafari: "+hn),mn.fontCanvas=r.createElement("canvas"),mn.canvasCtx=mn.fontCanvas.getContext("2d"),v(),m(),h(),g(),C(),O(),w(),V(),z(),p()}function f(){x(),P(),T(),y()}function v(){i.init(gn.connectionPreference,gn.appUrlSse,gn.appUrlWebsockets,gn.appUrlHttp,lt)}function p(){i.getServerState()}function h(){It(n)?Ct("initAudio: invalid zsAudio lib"):n.init(vn,5)}function y(){It(n)?Ct("resetAudio: invalid zsAudio lib"):n.reset()}function m(){t.init()}function g(){var i=!1,t=!1,n=!0,l=!1,r=!1,a=!1,u=0,d=new s(kt,!1,1),f=new o(null,i,t,n,l,r,a,u,null,null,d,null);mn.tiles=e.init2DArray(8,8,f);var v=new c(null);mn.tileCircles=e.initArray(8,v)}function x(){for(var e=0;e<mn.tiles.length;e++)for(var i=mn.tiles[e],t=0;t<i.length;t++)S(mn.tiles[e][t])}function S(i){b(i.id),i.isSelected=!1,i.isActive=!1,i.isVisible=!0,i.isPlaying=!1,i.isPlayingNext=!1,i.isPlayed=!1,i.clickCount=0,i.txt.value=kt,i.txt.isVisible=!1,i.modFill=null;for(var t=0;t<i.tweens.length;t++){var n=i.tweens[t];It(n)||n.pause(0)}var l=e.getElement(i.id);Me(i,l)}function b(i){var t=gn.tileGroupPrefix+i,n=e.getElement(t);It(n)||(n.style.opacity="1")}function P(){I(mn.centreShape),I(mn.innerCircle),I(mn.outerCircle)}function I(i){i.isVisible=!1,e.isFunction(i.gsapTimeline.pause)&&i.gsapTimeline.pause(0),e.isFunction(i.gsapTimeline.progress)&&i.gsapTimeline.progress(1,!0),e.isFunction(i.gsapExplodeTimeline.pause)&&i.gsapExplodeTimeline.pause(0)}function T(){Di("centreShape")}function C(){A("centreShape",mn.centreShape,gn.circleRadii[1],gn.circleRadii[7],!0),A("innerCircle",mn.innerCircle,gn.circleRadii[4],gn.viewMaxPoint,!1),A("outerCircle",mn.outerCircle,gn.circleRadii[7],gn.viewMaxPoint,!1)}function A(i,t,n,l,r){var a=e.getElement(i);if(It(a))Ct("Failed to find shape: "+i);else{At("initShape: shapeId: "+i),Ki(a,t.isVisible);var s=gn.shapeTimelineDuration;E(a,t,s,n),s=gn.shapeExplodeDuration,k(a,t,s,l,r)}}function E(i,t,n,l){var r=gsap.timeline({paused:!0,ease:"power4.inOut",onComplete:Ue,onCompleteParams:[t]});t.gsapTimeline=r;var a=gn.centre.x,s=gn.centre.y,o=1,c=i.children;if(!It(c)){At("initShapeTimeline: have : "+c.length+" children");for(var u=0;u<c.length;u++){var d=c[u];e.isEmptyString(d.id)&&(d.id="csh"+u);var f=d.getBBox(),v=f.x,p=f.y,h=Ne(a,s,l),y=e.randomIntFromInterval(0,360)*o;o*=-1;var m=e.randomFloatFromInterval(.1,2),g=h.x-v,x=h.y-p,S=d.id,b=gsap.from(e.toCssIdQuery(S),{x:g,y:x,rotation:y,scale:m});r.add(b,0)}r.totalDuration(n)}}function k(i,t,n,l,r){var a=gsap.timeline({paused:!0,ease:"slow",onComplete:je,onCompleteParams:[t]});t.gsapExplodeTimeline=a;var s=gn.centre.x,o=gn.centre.y,c=i.children;if(!It(c)){At("initShapeExplodeTimeline: have : "+c.length+" children");for(var u=0;u<c.length;u++){var d=c[u];e.isEmptyString(d.id)&&(d.id="csh"+u);var f=d.id,v=d.getBBox(),p=v.x,h=v.y,y=v.width,m=v.height,g=null;if(g=r?Ne(s,o,l):Ge(s,o,p,h,y,m,l),It(g))return void Ct("initShapeExplodeTimeline: calculated invalid random point");var x=g.x-p,S=g.y-h,b=gsap.to(e.toCssIdQuery(f),{x:x,y:S});a.add(b,0)}a.totalDuration(n)}}function w(){for(var e=gn.circleRadii,i=gn.centre,t=gn.tileAngles,n=gn.tileRotationDuration,l=gn.tileRotationAngle,r=gn.tileRotationYoyo,a=gn.tileRotationReps,s=0;s<e.length;s++){var o=mn.tileCircles[s];o.id=gn.tileCircleGroupPrefix+(s+1);var c=Le(o.id,n,l,r,a);o.tweens.push(c),l*=-1;for(var u=e[s],d=1;d<t.length;d++){var f=t[d-1],v=t[d];R(i.x,i.y,u,f,v,s+1,d)}}}function V(){var i=mn.tiles;if(e.isArray(i)){var n=gn.centre,l=n.x,r=n.y,a=gn.circleRadii[gn.circleRadii.length-1]+1,s=gn.outerFrameRadius,o=gn.frameParentId,c=gn.outerFrameId,u=t.createPathElement(c),d=gn.frameStyle;Pt(u,d);var f=t.createTorusPath(l,r,a,s);Tt(f)&&u.setAttribute("d",f),e.addChildToParentId(o,u)}else Ct("createOuterFrame: invalid tiles")}function z(){var i=gn.circleRadii[7]+2,n=gn.centre,l=gn.stageParentId,r=t.createSvgCircle(n.x,n.y,i,l);F(r),e.addChildToParentId(l,r)}function F(i){gn.stageVisibilityStyle.opacity=mn.stageAlpha,mn.stageAlpha>0?gn.stageVisibilityStyle.visibility=Lt:gn.stageVisibilityStyle.visibility=Rt,e.setElementAttributes(i,gn.stageStyle),e.setElementStyleProperty(i,gn.stageVisibilityStyle)}function M(){var i=gn.stageParentId,t="c"+i,n=e.getElement(t);It(n)||F(n)}function O(){var i=yt();It(i)||(yn=i,e.listen("resize",l,ce),e.listen("orientationchange",l,ce),L("Welcome to","<span style='color:blueviolet;'>ZScore</span>","awaiting performance start ...",null,!0))}function L(e,i,t,n,l){if(!It(yn)){var r=!1;if(!It(e)){var a=e.trim();mn.instructions.l1!=a&&(mn.instructions.l1=a,r=!0)}if(!It(i)){a=i.trim();mn.instructions.l2!=a&&(mn.instructions.l2=a,r=!0)}if(!It(t)){a=t.trim();mn.instructions.l3!=a&&(mn.instructions.l3=a,r=!0)}It(n)||(mn.instructions.bckgCol=n),l?r&&$i():tt()}}function R(i,n,l,r,a,s,o){var c=gn.tilePrefix+e.toStr(s)+gn.elementIdDelimiter+e.toStr(o),u=t.createPathElement(c);if(It(u))Ct("createSvgTile: Failed to create tile: "+c);else{var d=gn.tileCircleGroupPrefix+e.toStr(s),f=gn.tileGroupPrefix+c,v=t.createGroupElement(f);e.addChildToParentId(d,v),e.listen("mouseenter",v,te),e.listen("mouseleave",v,ne),e.listen("touchend",v,ie),e.listen("mouseup",v,ee);u=t.createPathElement(c);e.addChildToParentId(f,u);var p=s-1,h=o-1,y=mn.tiles[p][h];if(It(y))Ct("createSvgTile: Invalid tile state");else{y.id=c;var m=t.createArc(i,n,l,r,a);y.arc=m,Me(y,u);var g=null;It(y.txt)||(g=y.txt);var x=null;if(s<=1)x=t.createPieTilePath(i,n,m),N(i,n,l,r,a,o,c,f,g),D(y,i,n,m.endX,m.endY);else{var S=mn.tiles[p-1][h],b=S.arc;x=t.createTorusTilePath(m,b),U(i,n,r,a,o,b,m,c,f,g)}Tt(x)&&u.setAttribute("d",x)}}}function D(e,i,n,l,r){var a=gn.overlayPrefix+gn.tilePlayLinePrefix+e.id;e.playLine=t.createSvgLine(i,n,l,r,0,a)}function N(i,n,l,r,a,s,o,c,u){var d=gn.tileTextPathElementPrefix+o,f=t.createPathElement(d),v=gn.tileStylePieTextPathElement,p=r+e.round((a-r)/2,1),h=i,y=n-l,m=null;s>4&&s<9?(m=t.createLinePath(h,y,i,n),v=gn.tileStyleInvertedPieTextPathElement):m=t.createLinePath(i,n,h,y),f.setAttribute("d",m),t.rotateElement(f,p,i,n),u.sizeMultiplier=gn.tileTextSizeMultiplier.pie,j(u,f,d,c,o,v)}function G(e,i,n,l,r,a){var s=gn.selectedPrefix+r+a,o=t.createPathElement(s),c=gn.shapeStyleInvisible,u=t.createLinePath(e,i,n,l);return o.setAttribute("d",u),Pt(o,c),o}function U(e,i,n,l,r,a,s,o,c,u){var d=a.rX+(s.rX-a.rX)/2,f=t.createArc(e,i,d,n,l),v=t.invertArc(f);r>2&&r<7&&(v=f);var p=gn.tileTextPathElementPrefix+o,h=t.createArcPath(v),y=t.createPathElement(p);y.setAttribute("d",h);var m=gn.tileStyleTorusTextPathElement;u.sizeMultiplier=gn.tileTextSizeMultiplier.torus,j(u,y,p,c,o,m)}function j(i,n,l,a,o,c){Pt(n,gn.tileStyleTextPathDef),e.addFirstChildToParent(Bi(),n);var u=t.createTextElement(gn.tileTextElementPrefix+o);Pt(u,gn.tileStyleTextElement);var d=t.createTextPathElement(gn.tileTextElementPathPrefix+o);d.setAttribute("href",e.toCssIdQuery(l)),Pt(d,c);var f=t.createTspanElement(gn.tileTextSpanPrefix+o);Pt(f,gn.tileStyleTextSpan);var v=r.createTextNode(kt);f.appendChild(v),d.appendChild(f),u.appendChild(d),e.addChildToParentId(a,u);var p=kt,h=1;e.isObjectInstanceOf(s,i)||(p=i.value,h=i.sizeMultiplier),B(p,n,f,h)}function B(i,t,n,l){if(!It(n)&&!It(t)){var r=n;if(!It(r)){var a=r.textContent,s=kt;if(e.isString(i)&&kt!==i&&(s=i),a!==s){var o=s,c=o.length;if(c<gn.tileTextMinLength)for(var u=gn.tileTextMinLength-c,d=0;d<u;d++)o+=Vt;var f=t.getTotalLength(),v=l,p=e.getElement(gn.testTextElementId);p.textContent=o;var h=10,y=kt+h+"px";p.setAttribute("font-size",y);var m=p.getComputedTextLength();0===m&&(m=f);var g=f/m;h*=g*v,h=Math.floor(h),y=kt+h+"px",At("setTileText: text: "+s+" pathLen: "+f+" testTextLen: "+m+" ratio: "+g+" fontSize: "+y),r.setAttribute("font-size",y),r.textContent=s}}}}function W(e){return It(e)?null:e.isVisible?gn.shapeStyleVisible:gn.shapeStyleInvisible}function H(e){return e.isVisible?Tt(e.txt)&&!e.txt.isVisible?gn.tileStyleTextElementInvisible:gn.tileStyleTextElement:gn.tileStyleTextElementInvisible}function Q(e){return It(e)?null:e.isPlaying?gn.tileStylePlayLine:null}function q(e){return e.isVisible?gn.textStyleVisible:gn.textStyleInvisible}function X(e){return It(e)?null:e.isPlaying?gn.tileStyleOverlayPlaying:e.isPlayingNext?gn.tileStyleOverlayPlayingNext:e.isSelected?gn.tileStyleOverlaySelected:null}function Y(e){return It(e)?null:e.isPlaying?gn.tileStylePlaying:e.isPlayingNext?gn.tileStylePlayingNext:e.isPlayed?gn.tileStylePlayed:e.isVisible?e.isSelected?gn.tileStyleSelected:e.isActive?gn.tileStyleActive:gn.tileStyleInActive:gn.tileStyleInvisible}function Z(){for(var i=e.initArray(mn.tiles.length,null),t=0;t<mn.tiles.length;t++)for(var n=mn.tiles[t],l=0;l<n.length;l++){var r=mn.tiles[t][l];if(r.isActive){var a=e.getElement(r.id),s=i[t];It(s)&&(s=_(t),i[t]=s),J(a,r,s)}}}function _(i){var t=$(i);if(It(t))return null;var n=e.arrSortNumAsc(t);if(n.length<1)return null;var l=Zt,r=qt-l.r,a=Xt-l.r,s=n[0],o=n[n.length-1];return s===o&&(r=0,a=0),[s,o,r,a]}function J(i,t,n){if(t.isActive){var l=Yt,r=t.clickCount;if(!(r<0)){var a=K(t,n);l=e.modColour(l,a),t.modFill=l,i.setAttribute(Ot,l)}}}function K(i,t){var n=i.clickCount,l=gn.colModPerClick*n;if(!e.isArray(t)||4!=t.length)return l;l=e.mapRange(n,t[0],t[1],t[2],t[3]);return l}function $(i){var t=e.initArray(mn.tiles[0].length,0);if(i<0||i>=mn.tiles.length)return t;for(var n=mn.tiles[i],l=0;l<n.length;l++){var r=mn.tiles[i][l],a=r.clickCount;r.isPlayed&&(a=0),t[l]=a}return t}function ee(e){At("onMouseUp:"),pn||ae(this)}function ie(e){At("onTouchEnd:"),ae(this)}function te(e){pn||le(this)}function ne(e){pn||re(this)}function le(i){if(!e.isObject(i))return null;var t=i,n=i.id;if(ge(n)?n=be(n):me(n)&&(n=xe(n)),!he(n))return At("onElementPointerEntry: invalid tile id: "+n),null;t=e.getElement(n);var l=ve(n);Tt(l)&&l.isActive||Pt(t,gn.tileStyleOnPonterEntry)}function re(i){if(e.isObject(i)){var t=de(i);if(!It(t)){var n=fe(t);It(n)?At("onPointerLeave: invalid selected tile"):n.isActive||Me(n,t)}}}function ae(e){n.isReady()||h();var i=fe(e);It(i)?At("processSelectedTile: invalid selected tile"):se(i,e)}function se(t,n){oe(t);var l=t.id,r=e.getElement(l);if(!It(r)){var a=ue(l),s=mn.tileCircles[a.x];if(t.isActive||!t.isVisible){if(!(t.isPlaying||t.isPlayingNext||t.isPlayed)){if(l!==mn.selectedTileId&&Tt(mn.selectedTileId)){var o=ve(mn.selectedTileId);o.isSelected=!1;var c=e.getElement(mn.selectedTileId);Me(o,c),Te(o,c)}t.isSelected=!t.isSelected,t.isSelected&&(mn.selectedTileId=l,s.selectedId=l),Me(t,r),Te(t,r);var u={};u[Ft]=t.id,u[Mt]=t.isSelected,i.sendEvent(zt,u)}}else for(var d=s.tweens,f=0;f<d.length;f++){var v=d[f];ht(v)}}}function oe(i){var t=mn.speech;t.isPlaySpeechSynthOnClick&&n.isSpeachReady()&&e.isString(t.speechText)&&ai(t.speechText,t.speechVoice,t.speechIsInterrupt,i)}function ce(i){if(!e.isObject(this))return null;$i()}function ue(i){if(It(i))return null;if(!e)return Ct("getTileRowCol: invalid zsUtil"),null;var t=e.replace(i,gn.tilePrefix,kt),n=t.split(gn.elementIdDelimiter);if(!e.isArray(n)||2!==n.length)return At("getTileState: invalid tile info: "+t),null;var l=e.toInt(n[0])-1,r=e.toInt(n[1])-1;return e.createPoint(l,r)}function de(i){if(!e.isObject(i))return null;var t=i.id;return he(t)?i:(ge(t)?t=be(t):me(t)&&(t=xe(t)),It(t)?null:e.getElement(t))}function fe(i){if(!e.isObject(i))return null;var t=i.id;return ge(t)?t=be(t):me(t)&&(t=xe(t)),ve(t)}function ve(e){if(!he(e))return At("getTileState: invalid tile id: "+e),null;var i=ue(e);return It(i)?null:mn.tiles[i.x][i.y]}function pe(i){return!(It(i)||!e.isString(i))&&e.startsWith(i,gn.linePrefix+gn.overlayPrefix+gn.tilePlayLinePrefix)}function he(i){return!(It(i)||!e.isString(i))&&e.startsWith(i,gn.tilePrefix)}function ye(i){return!(It(i)||!e.isString(i))&&e.startsWith(i,gn.tileCircleGroupPrefix)}function me(i){return!(It(i)||!e.isString(i))&&e.startsWith(i,gn.tileTextElementPrefix)}function ge(i){return!(It(i)||!e.isString(i))&&e.startsWith(i,gn.tileGroupPrefix)}function xe(i){if(It(i)||!e.isString(i))return!1;var t=i.substring(gn.tileTextElementPrefix.length,i.length);return he(t)?t:null}function Se(i){if(It(i)||!e.isString(i))return!1;var t=i.substring(gn.overlayPrefix.length+gn.tilePlayLinePrefix.length,i.length);return he(t)?t:null}function be(i){if(It(i)||!e.isString(i))return!1;var t=i.substring(gn.tileGroupPrefix.length,i.length);return he(t)?t:null}function Pe(i){if(It(i)||!e.isString(i))return!1;var t=i.substring(gn.tileCircleGroupPrefix.length,i.length),n=e.toInt(t)-1;if(!(n<0||n>=mn.tileCircles.length))return mn.tileCircles[n];Ct("getCircleGroupIndexFromId: Invalid circle group index: "+n)}function Ie(i,t){if(!It(i)&&!It(t)){var n=t.id,l=gn.tileTextPathElementPrefix+n,r=e.getElement(l);if(!It(r)){var a=gn.tileTextElementPrefix+n,o=e.getElement(a);if(!It(o)){var c=kt;It(i)||It(i.txt)||(c=i.txt);var u=gn.tileTextSpanPrefix+n,d=e.getChildElement(o,e.toCssIdQuery(u));if(!It(d)){var f=kt,v=1;e.isObjectInstanceOf(s,c)||(f=c.value,v=c.sizeMultiplier),B(f,r,d,v)}}}}}function Te(i,t){var n=i.id,l=gn.overlayPrefix+n,r=e.getElement(l),a=X(i);It(a)?It(r)||r.remove():(It(r)&&(r=e.cloneElement(t,l)),Pt(r,a),e.addChildToParentId(gn.overlayParentId,r)),Ce(i)}function Ce(i){if(!It(i.playLine)){var t=i.playLine.id,n=e.getElement(t);It(n)&&(n=i.playLine);var l=Q(i);It(l)||(Pt(n,l),e.addChildToParentId(gn.overlayParentId,n))}}function Ae(i){for(var t=[],n=[],l=null,r=null,a=0;a<mn.tileCircles.length;a++){var s=mn.tileCircles[a],o=s.selectedId;if(!It(o)){var c=e.getElement(o);if(It(c))Ct("setSelectedTilesOverlay: can not find tile for selected id: "+o);else{var u=gn.selectedPrefix+o,d=e.getElement(u);if(It(d)&&(d=e.cloneElement(c,u),Pt(d,gn.shapeStyleInvisible),e.addChildToParentId(gn.overlayParentId,d),t.push(d),a>0)){var f=ve(o);r=f;var v=ke(a);It(l)&&(l=v);var p=Ee(f,v);if(It(p))continue;var h=e.getElement(p.id);if(!It(h))continue;e.addChildToParentId(gn.overlayParentId,p),n.push(p)}}}}p=Ee(l,r);if(!It(p)){h=e.getElement(p.id);It(h)&&(e.addChildToParentId(gn.overlayParentId,p),n.push(p))}var y=e.getElement(gn.overlayParentId),m=gn.overlayInDuration;It(i)||(m=i);var g=we(y,m,gn.outerFrameRadius);g.play();for(a=0;a<t.length;a++){var x=t[a];Pt(x,gn.tileStyleSelectedPath)}for(a=0;a<n.length;a++){x=n[a];Pt(x,gn.tileStyleConnectorPath)}}function Ee(e,i){if(It(e)||It(i))return null;var t=e.arc,n=i.arc;if(It(t)||It(n))return null;var l=t.startX,r=t.startY,a=n.endX,s=n.endY;return G(a,s,l,r,e.id,i.id)}function ke(e){if(e<=0)return null;if(e>=mn.tileCircles.length)return mn.tileCircles[mn.tileCircles.length-1];for(var i=e-1;i>=0;i--){var t=mn.tileCircles[i],n=t.selectedId;if(!It(n))return ve(n)}return null}function we(i,t,n){var l=gsap.timeline({paused:!0,ease:"power4.inOut"}),r=gn.centre.x,a=gn.centre.y,s=1,o=i.children;if(!It(o)){At("createSelectedTileTimeline: have : "+o.length+" children");for(var c=0;c<o.length;c++){var u=o[c];e.isEmptyString(u.id)&&(u.id="csh"+c);var d=u.getBBox(),f=d.x,v=d.y,p=d.width,h=d.height,y=Ge(r,a,f,v,p,h,n),m=e.randomIntFromInterval(0,360)*s;s*=-1;var g=e.randomIntFromInterval(5,15),x=y.x-f,S=y.y-v,b=u.id,P=gsap.from(e.toCssIdQuery(b),{x:x,y:S,rotation:m,scale:g});l.add(P,0)}return l.totalDuration(t),l}}function Ve(){e.removeChildren(gn.overlayParentId)}function ze(){Ve();for(var e=0;e<mn.tileCircles.length;e++){var i=mn.tileCircles[e];i.selectedId=null}}function Fe(e){e.isActive||(e.modFill=null)}function Me(i,t){var n=Y(i);Pt(t,n),i.isActive&&Tt(i.modFill)&&t.setAttribute(Ot,i.modFill);var l=gn.tileTextElementPrefix+i.id,r=e.getElement(l);if(!It(r)){var a=H(i);Pt(r,a)}}function Oe(i,t){var n=W(i),l=e.getElement(t);Pt(l,n)}function Le(i,t,n,l,r){if(!It(i)){var a=!1;Tt(l)&&(a=l);var s=0;return Tt(r)&&(s=r),gsap.from(e.toCssIdQuery(i),{duration:t,rotation:n,svgOrigin:kt+gn.centre.x+wt+gn.centre.y,onComplete:Zi,onCompleteParams:[i],paused:!0,yoyo:a,repeat:s,ease:"power1.inOut"})}Ct("rotate: Invalid objectId: "+i)}function Re(i,t,n){if(!It(i)){var l=e.toCssIdQuery(i);return gsap.to(l,{duration:t,rotation:n,svgOrigin:kt+gn.centre.x+wt+gn.centre.y,onComplete:Zi,onCompleteParams:[i],paused:!0,yoyo:!1,repeat:0,ease:"none"})}Ct("createRotatePlayline: Invalid objectId: "+i)}function De(i,t,n){if(!It(i))return gsap.to(e.toCssIdQuery(i),{duration:t,autoAlpha:n,onComplete:_i,onCompleteParams:[i],paused:!0});Ct("dissolve: Invalid objectId: "+i)}function Ne(i,t,n){if(!e)return Ct("getRandomPointInsideCircle: invalid zsUtil"),null;var l=2*Math.PI*Math.random(),r=Math.sqrt(Math.random()),a=n*r*Math.cos(l)+i,s=n*r*Math.sin(l)+t;return e.createPoint(a,s)}function Ge(i,t,n,l,r,a,s){var o=n-i,c=l-t,u=Math.sqrt(Math.pow(o,2)+Math.pow(c,2)),d=Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),f=s+2*d,v=f/u,p=o*v,h=c*v,y=e.round(n+p,0),m=e.round(l+h,0);return e.createPoint(y,m)}function Ue(e){At("onShapeTimelineComplete: progress: "+e.gsapTimeline.progress())}function je(e){At("onShapeExplodeTimelineComplete: progress: "+e.gsapExplodeTimeline.progress())}function Be(i){if(e.isArray(i))for(var t=0;t<i.length;t++)Ni(i[t]);else Ni(i)}function We(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)ji(i,t[l],n);else ji(i,t,n)}function He(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Qe(i,t[l],n);else Qe(i,t,n)}function Qe(e,i,t){if(!It(i))switch(At("runAudio: "+e+wt+i),i){case"all":qe(e,t);break;case"player":Xe(e,t);break;case"granulator":Ye(e,t);break;case"speechSynth":ni(e,t)}}function qe(i,t){if(e.isString(i))switch(i){case"volume":vi(t);break;default:return void Ct("runPlayer: Unknown actionId: "+i)}}function Xe(i,t){if(e.isString(i))switch(i){case"play":di(t);break;case"volume":fi(t);break;default:return void Ct("runPlayer: Unknown actionId: "+i)}}function Ye(i,t){if(e.isString(i))switch(i){case"play":Ze(t);break;case"stop":_e(t);break;case"config":ti(t);break;case"rampLinear":Je(t);break;case"rampSin":$e(t);break;case"volume":Ke(t);break;default:return void Ct("runAudioGranulator: Unknown actionId: "+i)}}function Ze(e){It(n)?Ct("runAudioPlayGranulator: Invalid zsAudio lib"):n.playGranulator()}function _e(e){It(n)?Ct("runAudioPlayGranulator: Invalid zsAudio lib"):n.stopGranulator()}function Je(i){if(It(n))Ct("runAudioPlayGranulator: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null,r=null;It(i.paramName)||(t=i.paramName),It(i.endValue)||(l=i.endValue),It(i.duration)||(r=i.duration),n.setGranulatorRampLinear(t,l,r)}}function Ke(i){if(It(n))Ct("runAudioPlayGranulator: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;It(i.level)||(t=i.level),It(i.timeMs)||(l=i.timeMs),n.setGranulatorGain(t,l)}}function $e(i){if(It(n))Ct("runAudioPlayGranulator: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null,r=null,a=null;It(i.paramName)||(t=i.paramName),It(i.amplitude)||(l=i.amplitude),It(i.frequency)||(r=i.frequency),It(i.duration)||(a=i.duration),n.setGranulatorRampSin(t,l,r,a)}}function ei(){It(n)?Ct("runAudioPlayGranulator: Invalid zsAudio lib"):n.resetGranulator()}function ii(){ze()}function ti(i){It(n)?Ct("runAudioPlayGranulator: Invalid zsAudio lib"):e.isObject(i)&&n.setGranulatorConfig(i)}function ni(i,t){if(e.isString(i))switch(i){case"play":ri(t);break;case"stop":si(t);break;case"config":oi(t);break;case"state":ci(t);break;case"rampLinear":ui(t);break;case"volume":li(t);break;default:return void Ct("runSpeechSynth: Unknown actionId: "+i)}}function li(i){if(It(n))Ct("setAudioSpeechVolume: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;It(i.level)||(t=i.level),It(i.timeMs)||(l=i.timeMs),n.setSpeechVolume(t,l)}}function ri(e){if(It(n))Ct("runPlaySpeechSynth: Invalid zsAudio lib");else if(It(e))Ct("runPlaySpeechSynth: Invalid params");else{var i=kt,t="random",l=!1;It(e.speechText)||(i=e.speechText),It(e.speechVoice)||(t=e.speechVoice),It(e.speechIsInterrupt)||(l=e.speechIsInterrupt);var r=mn.playingTileId;It(r)&&(r=mn.selectedTileId);var a=ve(r);ai(i,t,l,a)}}function ai(i,t,l,r){if(!It(i)){if(e.contains(i,dn)){var a=null;It(r)||(a=r.txt),i=e.isString(a.value)?e.replace(i,dn,a.value):e.replace(i,dn,kt)}n.speak(i,t,l)}}function si(e){It(n)?Ct("runStopSpeechSynth: Invalid zsAudio lib"):n.stopSpeach()}function oi(e){It(n)?Ct("updateSpeechCofig: Invalid zsAudio lib"):n.setSpeechConfig(e)}function ci(i){if(e.isObject(i)){var t=mn.speech;It(i.isPlaySpeechSynthOnClick)||(t.isPlaySpeechSynthOnClick=i.isPlaySpeechSynthOnClick),It(i.speechText)||(t.speechText=i.speechText),It(i.speechVoice)||(t.speechVoice=i.speechVoice),It(i.speechIsInterrupt)||(t.speechIsInterrupt=i.speechIsInterrupt)}else Ct("setSpeechState: Invalid params")}function ui(i){if(e.isObject(i)){var t=null;It(i.paramName)||(t=i.paramName);var l=null;It(i.endValue)||(l=i.endValue);var r=null;It(i.duration)||(r=i.duration),n.rumpLinearSpeechParam(t,l,r)}else Ct("rampLinearSpeechParam: Invalid params")}function di(i){if(It(n))Ct("runPlayerPlay: Invalid zsAudio lib");else if(e.isObject(i)){var t=0;It(i.index)||(e.isString(i.index)?t=e.toInt(i.index):e.isNumeric(i.index)&&(t=i.index));var l=null,r=null,a=null;It(i.startTime)||(l=i.startTime),It(i.offset)||(r=i.offset),It(i.duration)||(a=i.duration),n.playAudio(t,l,r,a)}}function fi(i){if(It(n))Ct("setAudioMasterVolume: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;It(i.level)||(t=i.level),It(i.timeMs)||(l=i.timeMs),n.setPlayerVolume(t,l)}}function vi(i){if(It(n))Ct("setAudioMasterVolume: Invalid zsAudio lib");else if(e.isObject(i)){var t=null,l=null;It(i.level)||(t=i.level),It(i.timeMs)||(l=i.timeMs),n.setMasterVolume(t,l)}}function pi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)hi(i,t[l],n);else hi(i,t,n)}function hi(i,t,n){if(e.isString(i)&&e.isObject(n))switch(At("rotate: "+t),i){case"start":yi(t,n);break;case"reset":mi(t,n);break;default:return void Ct("Unknown rotate actionId: "+i)}}function yi(i,t){var n=0,l=360;It(t.duration)||(n=t.duration),It(t.angle)||(l=t.angle);var r=null;if(he(i)){var a=gn.tileGroupPrefix+i,s=e.getElement(i),o=Ji(s);e.isArray(o)&&o.length>0?r=o[0]:(r=Le(a,n,l),o.push(r))}else if(pe(i)){var c=e.getElement(i);if(It(c)){var u=Se(i);if(Tt(u)){var d=ve(u);Ce(d),c=e.getElement(d.playLine.id)}}if(Tt(c)){o=Ji(c);e.isArray(o)&&o.length>0?r=o[0]:(r=Re(c.id,n,l),o.push(r))}}else if(ye(i)){var f=Pe(i);if(!It(f)){var v=f.tweens;r=v,e.isArray(v)&&(r=v[0])}}ht(r)}function mi(i,t){if(e.isString(i)&&he(i)){var n=e.getElement(i),l=Ji(n);if(e.isArray(l)&&l.length>0){var r=l[0];It(r)||r.pause(0)}}}function gi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)xi(i,t[l],n);else xi(i,t,n)}function xi(i,t,n){if(e.isString(i)&&e.isObject(n))switch(At("runAlpha: "+t),i){case"start":Si(t,n);break;default:return void Ct("Unknown aplha actionId: "+i)}}function Si(i,t){var n=0;It(t.duration)||(n=t.duration);var l=1;It(t.value)||(l=t.value);var r=[];if(he(i)){var a=gn.tileGroupPrefix+i;r.push(De(a,n,l))}else switch(i){case gn.stageParentId:if(mn.stageAlpha===l)return;var s="c"+gn.stageParentId,o=e.getElement(s);if(It(o))return void Ct("Invalid stage circle id: "+s);r.push(De(s,n,l))}for(var c=0;c<r.length;c++)At("runAlphaStart: tween: "+i),ht(r[c])}function bi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Pi(i,t[l],n);else Pi(i,t,n)}function Pi(i,t,n){if(e.isString(i))switch(At("reset: actionId: "+i+wt+t),i){case"all":Ii(t,n);break;case"elements":Ti(t,n);break;default:return void Ct("Unknown reset actionId: "+i)}}function Ii(i,t){if(e.isString(i))switch(i){case"tiles":x();break;case"shapes":P();break;case"elements":f();break;case"granulator":ei();break;case"selectedTiles":ii();break;default:return void Ct("Unknown reset target: "+i)}}function Ti(e,i){if(he(e))S(ve(elementId));else switch(e){case"centreShape":return I(mn.centreShape);case"innerCircle":return I(mn.innerCircle);case"outerCircle":return I(mn.outerCircle);case"zoom":return T();default:At("resetElements: unknown target: "+e)}}function Ci(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Ai(i,t[l],n);else Ai(i,t,n)}function Ai(i,t,n){if(e.isString(i))switch(At("runActivate: actionId: "+i+wt+t),i){case"display":Ei(t,n);break;default:return void Ct("Unknown activate actionId: "+i)}}function Ei(e,i){if(!It(e))switch(At("runDisplayAction: target: "+e),e){case"selectedTiles":ki(i)}}function ki(e){At("runDisplaySelectedTiles: ");var i=null;It(e)||It(e.duration)||(i=e.duration),Ae(i)}function wi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Vi(i,t[l],n);else Vi(i,t,n)}function Vi(i,t,n){if(e.isString(i))switch(At("runDeActivate: actionId: "+i+wt+t),i){case"display":zi(t,n);break;default:return void Ct("Unknown DeActivate actionId: "+i)}}function zi(e,i){if(!It(e))switch(At("runDeActivateDisplayAction: target: "+e),e){case"overlays":Ve()}}function Fi(i,t,n){if(e.isArray(t))for(var l=0;l<t.length;l++)Mi(i,t[l],n);else Mi(i,t,n)}function Mi(i,t,n){if(e.isString(i))switch(At("stop: actionId: "+i+wt+t),i){case"stop":Oi(t,n);break;default:return void Ct("Unknown stop actionId: "+i)}}function Oi(e,i){if(!It(e))switch(At("runStopAction: target: "+e),e){case"all":Li(i);break;case"granulator":_e(i);break;case"speechSynth":si(i)}}function Li(e){At("runStopAll: "),!It(n)&&n.isReady()&&(_e(e),si(e))}function Ri(e){It(e)||(mn.stageAlpha=e,M())}function Di(e){At("zoomLevel: "+e),It(e)||Ni(e)}function Ni(e){var i=Bi();if(It(i))At("zoom: invalid canvas");else{At("zoomTarget: "+e);var t=Ui(e);gsap.to(i,{attr:{viewBox:t},ease:"power3.out",duration:gn.zoomDuration})}}function Gi(e){L(e.line1,e.line2,e.line3,e.colour,e.isVisible)}function Ui(i){switch(e.isString(i)||(i="default"),i){case"centreSmall":return gn.zoomCentreSmall;case"centreShape":return gn.zoomCentreShape;case"innerCircleSmall":return gn.zoomInnerCircleSmall;case"innerCircle":return gn.zoomInnerCircle;case"outerCircleSmall":return gn.zoomOuterCircleSmall;case"outerCircle":default:return gn.zoomFull}}function ji(i,t,n){if(e.isString(t)&&e.isString(i)){At("runTimeline: "+t);var l=null;switch(t){case"centreShape":l=mn.centreShape.gsapTimeline;break;case"innerCircle":l=mn.innerCircle.gsapTimeline;break;case"outerCircle":l=mn.outerCircle.gsapTimeline;break;case"centreShapeExplode":l=mn.centreShape.gsapExplodeTimeline;break;case"innerCircleExplode":l=mn.innerCircle.gsapExplodeTimeline;break;case"outerCircleExplode":l=mn.outerCircle.gsapExplodeTimeline;break;default:return void Ct("runTimeline: invalid target: "+t)}switch(i){case"start":Wi(l,n);break;case"stop":Hi(l);break;case"end":Qi(l);break;case"reset":qi(l);break;case"reverse":Yi(l,n);break;case"resume":Xi(l,n);break;default:return void Ct("runTimeline: invalid actionId: "+i)}}}function Bi(){return e.getElement("svgCanvas")}function Wi(e,i){if(It(e))Ct("startTimeline: invalid timeline");else{if(!It(i)&&!It(i.duration)){var t=i.duration;e.totalDuration(t)}var n=e.progress();n>0?e.restart():e.play()}}function Hi(e){It(e)?Ct("stopTimeline: invalid timeline"):e.pause()}function Qi(e){It(e)?Ct("endTimeline: invalid timeline"):e.pause(1)}function qi(e){It(e)?Ct("stopTimeline: invalid timeline"):e.pause(0)}function Xi(e,i){if(It(e))Ct("resumeTimeline: invalid timeline");else if(!e.isActive()){var t=e.totalDuration();if(!It(i)&&!It(i.duration))t=i.duration;var n=e.progress();1==n||0==n?(e.totalDuration(t),e.restart()):e.resume()}}function Yi(e,i){if(It(e))Ct("reverseTimeline: invalid timeline");else{var t=e.progress();if(t<1&&Qi(e),!It(i)&&!It(i.duration)){var n=i.duration;e.totalDuration(n)}e.reverse()}}function Zi(i){e.getElement(i);if(pe(i)){var t=De(i,.5,0);ht(t)}}function _i(i){var t=e.getElement(i);if(At("onAlphaComplete: "+i+"  opacity: "+t.style.opacity+"  visiblility: "+t.style.visibility),pe(i)){var n=e.getElement(i);Tt(n)}}function Ji(i){if(!e.isObject(i))return[];if(he(i.id)){var t=fe(i);return t.tweens}return gsap.getTweensOf(i)}function Ki(e,i){if(!It(e)){var t="hidden";i&&(t="visible"),Pt(e,{visibility:t})}}function $i(i){if(!It(yn)){yn.innerHTML=kt;var t=mn.instructions.l1,n=gn.textSpanPrefix+"1",l=mn.instructions.l2,r=gn.textSpanPrefix+"2",a=mn.instructions.l3,s=gn.textSpanPrefix+"3",o=kt;i||(i=kt,e.isEmptyString(t)||(o=et(t,o),t=e.wrapInSpanElement(t,n),i+=t),e.isEmptyString(l)||(At("displayInstructions: processing line2 "+l),o=et(l,o),l=e.wrapInSpanElement(l,r),i=e.addSuffixIfNotThere(i,gn.textLineBreak),i+=l),e.isEmptyString(a)||(At("displayInstructions: processing line3 "+a),o=et(a,o),a=e.wrapInSpanElement(a,s),i=e.addSuffixIfNotThere(i,gn.textLineBreak),i+=a));var c=gn.textFontSize,u=mt(o,c,yn);yn.style.fontSize=kt+u+"px",yn.style.fontFamily=gn.textFontFamily,yn.innerHTML=i;var d=e.getChildElement(yn,e.toCssIdQuery(n));It(d)||(d.style.opacity=0);var f=e.getChildElement(yn,e.toCssIdQuery(r));It(f)||(f.style.opacity=0);var v=e.getChildElement(yn,e.toCssIdQuery(s));if(It(v)||(v.style.opacity=0),mn.instructions.isVisible=!0,nt(yn,mn.instructions),gn.textSpanIsFadeIn){var p=gn.textSpanFadeTimeSec,h=gn.textSpanFadeStaggerTimeSec;It(d)||gsap.to(d,{duration:p,autoAlpha:1,ease:"power1.in"}),It(f)||gsap.to(f,{delay:h,duration:p,autoAlpha:1,ease:"power1.in"}),It(v)||gsap.to(v,{delay:2*h,duration:p,autoAlpha:1,ease:"power1.in"})}else It(d)||(d.style.opacity=1),It(f)||(f.style.opacity=1),It(v)||(v.style.opacity=1)}}function et(i,t){var n=e.removeMarkup(i);return n.length>t.length?n:t}function it(e){return gn.textFontType+wt+e+"px "+gn.textFontFamily}function tt(){It(yn)||(yn.innerHTML=kt,mn.instructions.isVisible=!1,nt(yn,mn.instructions))}function nt(i,t){var n=q(t);It(t.bckgCol)||(n.background=t.bckgCol),e.setElementStyleProperty(i,n)}function lt(e,i){It(e)||(i||f(),Tt(e.tiles)&&(i?at(e.tiles):st(e.tiles)),Tt(e.centreShape)&&rt(e.centreShape,mn.centreShape,"centreShape"),Tt(e.innerCircle)&&rt(e.innerCircle,mn.innerCircle,"innerCircle"),Tt(e.outerCircle)&&rt(e.outerCircle,mn.outerCircle,"outerCircle"),Tt(e.actions)&&ct(e.actions),Tt(e.zoomLevel)&&Di(e.zoomLevel),Tt(e.instructions)&&Gi(e.instructions),Tt(e.stageAlpha)&&Ri(e.stageAlpha))}function rt(e,i,t){It(e)||It(i)||(i.isVisible=e.isVisible,Oe(i,t))}function at(i){if(e.isArray(i)){for(var t=[],n=0;n<i.length;n++){var l=i[n];if(e.isObject(l)){var r=l.state,a=ve(r.id),s=l.tileText,o=a.txt;a.isActive;a.isActive=r.isActive,a.isVisible=r.isVisible,a.isPlaying=r.isPlaying,a.isPlayingNext=r.isPlayingNext,a.isPlayed=r.isPlayed,a.clickCount=r.clickCount,o.value=s.value,o.isVisible=s.isVisible,t.push(a)}else Ct("processSeverTilesStateDelta: invalid server tile")}ot(t)}}function st(i){if(e.isArray(i)&&e.isArray(i[0])){for(var t=[],n=0;n<i.length;n++)for(var l=i[n],r=0;r<l.length;r++){var a=i[n][r],s=mn.tiles[n][r],o=a.id,c=s.id;if(o===c){var u=a.state,d=a.tileText,f=s.txt;vt(s,u)&&pt(f,d)||(s.isActive=u.isActive,s.isVisible=u.isVisible,s.isPlaying=u.isPlaying,s.isPlayingNext=u.isPlayingNext,s.isPlayed=u.isPlayed,s.clickCount=u.clickCount,f.value=d.value,f.isVisible=d.isVisible,t.push(s))}else Ct("processSeverTilesState: Server id "+o+"and client id "+c+"not identical")}ot(t)}}function ot(i){At("Have "+i.length+" tile changes");for(var t=0;t<i.length;t++){var n=i[t],l=e.getElement(n.id);!n.isPlayed&&n.isVisible&&n.isActive||!n.isSelected||(n.isSelected=!1),Fe(n),Me(n,l),Ie(n,l),Te(n,l),n.isPlaying&&(mn.playingTileId=n.id)}Z()}function ct(i){var t=null,n=null,l=[],r={};if(e.isArray(i))for(var a=0;a<i.length;a++){var s=i[a];Tt(s.id)&&(t=s.id),Tt(s.actionType)&&(n=s.actionType),Tt(s.elementIds)&&(l=s.elementIds),Tt(s.params)&&(r=s.params),ut(t,n,l,r)}}function ut(e,i,t,n){if(At("doAction: "+e+" actionType: "+i),!It(i)&&!It(t))switch(i){case"ACTIVATE":Ci(e,t,n);break
;case"ANIMATION":break;case"DEACTIVATE":wi(e,t,n);break;case"VISIBLE":break;case"INVISIBLE":dt(t);break;case"ZOOM":Be(t);break;case"TIMELINE":We(e,t,n);break;case"ROTATE":pi(e,t,n);break;case"ALPHA":gi(e,t,n);break;case"AUDIO":He(e,t,n);break;case"RESET":bi(e,t,n);break;case"STOP":Fi(e,t,n);break;default:Ct("doAction: Unknown actionType: "+i)}}function dt(i){if(!It(i))if(e.isArray(i))for(var t=0;t<i.length;t++)ft(i[t]);else ft(i)}function ft(i){if(!It(i)){var t=e.getElement(i);if(he(i)){var n=fe(t);if(It(n))return;n.isVisible=!1,Me(n,t)}}}function vt(e,i){return!It(e)&&!It(i)&&(e.id===i.id&&(e.isVisible===i.isVisible&&e.isActive===i.isActive&&e.isPlaying===i.isPlaying&&e.isPlayingNext===i.isPlayingNext&&e.clickCount===i.clickCount&&e.isPlayed===i.isPlayed))}function pt(e,i){return!It(e)&&!It(i)&&(e.isVisible===i.isVisible&&e.value===i.value)}function ht(e){if(!It(e)){var i=e.progress();i>0?e.restart():e.play()}}function yt(){return e.getElement(gn.instructionTxtElementId)}function mt(e,i,t){var n=1;l.innerWidth||r.documentElement.clientWidth||r.body.clientWidth;var a=l.innerHeight||r.documentElement.clientHeight||r.body.clientHeight,s=(it(n),t.clientWidth),o=s*gn.textWidthCompressor,c=a*gn.textAreaMax;n=xt(e,i,o),n=gt(s,n,c);var u=gn.textMaxFontSize;return n>u&&(n=u),n}function gt(e,i,t){var n=it(i),l=i,r=bt(n,e,t);if(r<0)return l;var a=r*gn.textNumberOfLines,s=t/a;return s<1&&(l*=s),l}function xt(e,i,t){var n=it(i),l=St(n,e),r=l.width;if(r<=0||r>t||Math.abs(t-r)<1)return i;var a=t/r,s=i*a;return xt(e,s,t)}function St(e,i){var t=mn.fontCanvas,n=mn.canvasCtx;return n.fillRect(0,0,t.width,t.height),n.textBaseline="top",n.fillStyle=Dt,n.font=e,n.measureText(i)}function bt(e,i,t){var n=mn.fontCanvas,l=mn.canvasCtx;n.width=i,n.height=t,l.fillRect(0,0,n.width,n.height),l.textBaseline="top",l.fillStyle=Dt,l.font=e;var r="gM";l.fillText(r,0,0);for(var a=l.getImageData(0,0,n.width,n.height).data,s=-1,o=-1,c=0;c<n.height;c++)for(var u=0;u<n.width;u++){var d=4*(c*n.width+u);if(0!==a[d]){-1===s&&(s=c);break}if(u===n.width-1&&-1!==s){o=c,c=n.height;break}}var f=(o-s)*gn.textHeightCompressor;return f}function Pt(i,t){e.setElementAttributes(i,t)}function It(i){return e.isNull(i)}function Tt(i){return e.isNotNull(i)}function Ct(i){e.logError(i)}function At(i){e.log(i)}const Et="DEV",kt="",wt=" ",Vt="m",zt="ELEMENT_SELECTED",Ft="elementId",Mt="selected",Ot="fill",Lt="visible",Rt="hidden",Dt="#FFFFFF",Nt="#000000",Gt="#CCFFCC",Ut="#C0C0C0",jt="#2F4F4F",Bt="#696969",Wt="#4B4B4B",Ht="#FFA500",Qt="#DC143C",qt=204,Xt=0,Yt="#666666",Zt={r:102,g:102,b:102},_t=Bt,Jt=Wt,Kt=Bt,$t=Dt,en=jt,tn=jt,nn=Dt,ln=Dt,rn=Nt,an=Qt,sn=Gt,on=Ht,cn=Ut,un=Ut,dn="@TILE_TEXT@",fn="Arial";var vn=["/audio/violin-tuning.mp3","/audio/UnionRoseE2m.mp3","/audio/UnionRoseE3.mp3","/audio/UnionRoseE4.mp3","/audio/UnionRoseE5.mp3","/audio/UnionRose-m1.mp3"],pn=null,hn=null,yn=null,mn={tiles:[],tileCircles:[],centreShape:{isVisible:!1,gsapTimeline:{},gsapExplodeTimeline:{}},innerCircle:{isVisible:!1,gsapTimeline:{},gsapExplodeTimeline:{}},outerCircle:{isVisible:!1,gsapTimeline:{},gsapExplodeTimeline:{}},instructions:{isVisible:!1,l1:kt,l2:kt,l3:kt,bckgCol:"rgba(225, 225, 225, 0.85)"},selectedTileId:null,playingTileId:null,fontCanvas:null,canvasCtx:null,speech:{isPlaySpeechSynthOnClick:!1,speechText:"I, I clicked on "+dn,speechVoice:"random",speechIsInterrupt:!0},stageAlpha:1},gn={connectionPreference:"ws,sse,poll",centre:{x:762,y:762},circleRadii:[55,92,125,194,291,401,552,750],outerFrameRadius:2e3,lineEnd:{x:762,y:12},lineLen:750,lineAngles:[0,45,90,135,180,225,270,315],tileAngles:[0,45,90,135,180,225,270,315,360],viewMinPoint:0,viewMaxPoint:1525,zoomCentreSmall:"700 700 124 124",zoomCentreShape:"660 660 204 204",zoomInnerCircleSmall:"540 540 444 444",zoomInnerCircle:"471 471 582 582",zoomOuterCircleSmall:"350 350 824 824",zoomOuterCircle:"471 471 582 582",zoomFull:"0 0 1525 1525",circlePrefix:"c",linePrefix:"l",tilePrefix:"t",overlayPrefix:"o",tilePlayLinePrefix:"pl",selectedPrefix:"s",tileRotationDuration:2,tileRotationAngle:45,tileRotationYoyo:!1,tileRotationReps:0,tileCircleGroupPrefix:"ctg",tileGroupPrefix:"g",tileTextElementPrefix:"x",tileTextPathElementPrefix:"px",tileTextElementPathPrefix:"hx",tileTextSpanPrefix:"sp",stageParentId:"stage",overlayParentId:"overlay",stageId:"stageCircle",frameParentId:"frame",outerFrameId:"outerFrame",elementIdDelimiter:"-",svgArcs:[null,null,null,null,null,null,null,null],gridParentId:"grid",gridStyle:{fill:"none",stroke:"aqua","stroke-width":"2px"},stageStyle:{fill:rn,"stroke-width":"0px","stroke-opacity":"0","pointer-events":"none"},stageVisibilityStyle:{opacity:mn.stageAlpha,visibility:"visible"},tilesParentId:"tiles",frameStyle:{fill:ln,"stroke-width":"0px","stroke-opacity":"0",visibility:"visible",opacity:1},tileStyleOverlayPlayingNext:{fill:"none",stroke:on,"stroke-width":"1px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleOverlayPlaying:{fill:"none",stroke:sn,"stroke-width":"1px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleOverlaySelected:{fill:"none",stroke:an,"stroke-width":"2px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleSelectedPath:{fill:"none",stroke:an,"stroke-width":"7px",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleConnectorPath:{fill:"none",stroke:an,"stroke-width":"2px",visibility:"visible",opacity:1,"pointer-events":"none"},tileStyleVisible:{fill:Kt,stroke:cn,"stroke-width":"2px","pointer-events":"all",visibility:"visible",opacity:1},tileStyleActive:{fill:_t,stroke:cn,"stroke-width":"2px","pointer-events":"all",visibility:"visible",opacity:1},tileStyleInActive:{fill:$t,stroke:cn,"stroke-width":"2px","pointer-events":"all",visibility:"visible",opacity:1},tileStyleInvisible:{visibility:"hidden"},tileStyleOnPonterEntry:{fill:en},tileStyleSelected:{fill:tn,stroke:cn,"stroke-width":"2px",visibility:"visible",opacity:1},tileStylePlayed:{visibility:"hidden"},tileStylePlaying:{fill:Jt,stroke:cn,"stroke-width":"1px",visibility:"visible",opacity:1},tileStylePlayingNext:{stroke:cn,"stroke-width":"2px",visibility:"visible",opacity:1},tileStyleTextPathDef:{fill:"none",stroke:"none"},tileStyleTextElement:{visibility:"visible",opacity:1},tileStyleTextElementInvisible:{visibility:"hidden"},tileStyleTorusTextPathElement:{startOffset:"50%","text-anchor":"middle",fill:nn,stroke:"none"},tileStylePieTextPathElement:{startOffset:"90%","text-anchor":"end",fill:nn,stroke:"none"},tileStyleInvertedPieTextPathElement:{startOffset:"10%","text-anchor":"start",fill:nn,stroke:"none"},tileStyleTextSpan:{"font-family":fn,"dominant-baseline":"middle"},tileTextMinLength:5,tileTextSizeMultiplier:{torus:.8,pie:.7},tileStylePlayLine:{fill:"none",stroke:un,"stroke-width":"4px","stroke-linecap":"round",visibility:"visible",opacity:1,"pointer-events":"none"},shapeStyleInvisible:{visibility:"hidden"},shapeStyleVisible:{visibility:"visible"},shapeTimelineDuration:60,shapeExplodeDuration:5,instructionTxtElementId:"instructionTxt",textLineBreak:"<br/>",textStyleInvisible:{visibility:"hidden"},textStyleVisible:{visibility:"visible"},textFontFamily:"Arial",textFontType:"normal",textFontSize:50,textMaxFontSize:70,textMaxLineLen:30,textHeightCompressor:1.1,textWidthCompressor:.9,textAreaMax:.4,textNumberOfLines:3,textSpanPrefix:"is",textSpanIsFadeIn:!0,textSpanFadeTimeSec:1,textSpanFadeStaggerTimeSec:.5,appUrlHttp:"/htp",appUrlSse:"/sse",appUrlWebsockets:"/wsoc",zoomDuration:3,all:"ALL",testTextElementId:"testTxt",colModPerClick:-20,maxColModPerClick:-150,overlayInDuration:12};return{load:function(){u()},createSvgTile:R,initTiles:g,setTileText:B}}(zsUtil,zsNet,zsSvg,zsAudio,window,document);